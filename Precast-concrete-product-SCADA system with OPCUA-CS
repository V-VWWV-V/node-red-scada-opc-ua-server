[
    {
        "id": "data_simulator",
        "type": "inject",
        "z": "main_flow_tab",
        "name": "æ•°æ®æ¨¡æ‹Ÿå™¨",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "2",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "x": 330,
        "y": 280,
        "wires": [
            [
                "data_generator"
            ]
        ]
    },
    {
        "id": "data_generator",
        "type": "function",
        "z": "main_flow_tab",
        "name": "ç”Ÿäº§æ•°æ®ç”Ÿæˆå™¨",
        "func": "// ç”Ÿäº§æ¨¡å—çŠ¶æ€å®šä¹‰\nconst modules = [\n    { name: \"æ··å‡åœŸåˆ¶å¤‡\", status: \"è¿è¡Œ\", progress: 0, color: \"green\" },\n    { name: \"æ¨¡å…·ç»„è£…\", status: \"è¿è¡Œ\", progress: 0, color: \"yellow\" },\n    { name: \"é’¢ç­‹ç½‘ç‰‡å®‰è£…\", status: \"è¿è¡Œ\", progress: 0, color: \"green\" },\n    { name: \"æ··å‡åœŸæµ‡ç­‘\", status: \"è¿è¡Œ\", progress: 0, color: \"red\" },\n    { name: \"å…»æŠ¤\", status: \"è¿è¡Œ\", progress: 0, color: \"green\" },\n    { name: \"è„±æ¨¡ä¸èµ·åŠ\", status: \"è¿è¡Œ\", progress: 0, color: \"green\" },\n    { name: \"æˆå“è´¨æ£€\", status: \"è¿è¡Œ\", progress: 0, color: \"green\" },\n    { name: \"å…¥åº“ç®¡ç†\", status: \"è¿è¡Œ\", progress: 0, color: \"green\" }\n];\n\n// è·å–æˆ–åˆå§‹åŒ–å…¨å±€æ•°æ®\nlet globalData = global.get(\"productionData\") || {\n    dailyTarget: 200,\n    dailyCompleted: 0,\n    currentHourProduced: 0,\n    modules: JSON.parse(JSON.stringify(modules)),  // æ·±æ‹·è´é¿å…å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡\n    alarms: [],\n    timestamp: Date.now()\n};\n\n// æ¨¡æ‹Ÿè¿›åº¦æ›´æ–°\nfor (let i = 0; i < globalData.modules.length; i++) {\n    let module = globalData.modules[i];\n    if (module.status === \"è¿è¡Œ\") {\n        module.progress += Math.random() * 5;\n        if (module.progress > 100) {\n            module.progress = Math.random() * 20; // é‡æ–°å¼€å§‹æ–°çš„ç”Ÿäº§å‘¨æœŸ\n            if (i === 0) { // æ··å‡åœŸåˆ¶å¤‡å®Œæˆï¼Œå¢åŠ äº§é‡\n                globalData.currentHourProduced += 1;\n                globalData.dailyCompleted += 1;\n            }\n        }\n    } else if (module.status === \"å¾…æ–™\") {\n        module.progress = 0;\n    } else if (module.status === \"æ•…éšœ\") {\n        module.progress = Math.max(0, module.progress - 1);\n    }\n}\n\nif (globalData.dailyCompleted >= globalData.dailyTarget) {\n    // é‡ç½®\n    globalData.dailyCompleted = 0;\n    globalData.currentHourProduced = 0;\n    globalData.alarms = [];\n    node.warn(\"æ—¥ç”Ÿäº§ç›®æ ‡å·²è¾¾ï¼Œå·²å®Œæˆæ•°é‡å·²é‡ç½®ä¸º0\");\n}\n\n// æ¨¡æ‹ŸæŠ¥è­¦\nif (Math.random() < 0.1) { // 10%æ¦‚ç‡äº§ç”Ÿæ–°æŠ¥è­¦\n    const alarmTypes = [\n        \"æ¸©åº¦è¶…é™æŠ¥è­¦\",\n        \"å‹åŠ›å¼‚å¸¸æŠ¥è­¦\",\n        \"æ–™ä½ä½æŠ¥è­¦\",\n        \"è®¾å¤‡æ•…éšœæŠ¥è­¦\",\n        \"è´¨é‡å¼‚å¸¸æŠ¥è­¦\"\n    ];\n    const priorities = [\"é«˜\", \"ä¸­\", \"ä½\"];\n\n    globalData.alarms.push({\n        id: Date.now(),\n        type: alarmTypes[Math.floor(Math.random() * alarmTypes.length)],\n        priority: priorities[Math.floor(Math.random() * priorities.length)],\n        module: modules[Math.floor(Math.random() * modules.length)].name,\n        time: new Date().toLocaleTimeString()\n    });\n}\n\n// é™åˆ¶æŠ¥è­¦æ•°é‡\nif (globalData.alarms.length > 10) {\n    globalData.alarms = globalData.alarms.slice(-10);\n}\n\n// æ›´æ–°æ—¶é—´æˆ³\nglobalData.timestamp = Date.now();\n\n// ---- æ‰©å±•ï¼Œæ•´ç†æ¨¡å—çŠ¶æ€æ–‡æœ¬ï¼Œæ ¼å¼ï¼š æ¨¡å—å - çŠ¶æ€ - è¿›åº¦%\nlet moduleTexts = globalData.modules.map(m => {\n    // ç»™è¿›åº¦ä¿ç•™1ä½å°æ•°ï¼Œé¢œè‰²ä¿¡æ¯å¯æ ¹æ®éœ€æ±‚æ·»åŠ \n    return `${m.name} - ${m.status} - ${m.progress.toFixed(1)}%`;\n});\n\n// æ•´ç†æŠ¥è­¦æ–‡æœ¬ï¼Œæ ¼å¼ç¤ºä¾‹ï¼š æ—¶é—´ [ä¼˜å…ˆçº§] æŠ¥è­¦ç±»å‹ (æ¨¡å—)\nlet alarmTexts = globalData.alarms.map(a => {\n    return `${a.time} [${a.priority}] ${a.type} (${a.module})`;\n});\n\n// ä¿å­˜æ›´æ–°åçš„æ•°æ®\nglobal.set(\"productionData\", globalData);\nflow.set(\"precast_concrete_productionline1\", globalData);\n\n// è¿”å›å¤šè·¯æ¶ˆæ¯ï¼Œå¯ä»¥æ‹†åˆ†è¾“å‡ºï¼š\nreturn [\n    {\n        topic: \"stats\", payload: {\n            dailyTarget: globalData.dailyTarget,\n            dailyCompleted: globalData.dailyCompleted,\n            currentHourProduced: globalData.currentHourProduced,\n            completionRate: (globalData.dailyCompleted / globalData.dailyTarget * 100).toFixed(1),\n            timestamp: globalData.timestamp\n        }\n    },\n    { topic: \"modules\", payload: moduleTexts },\n    { topic: \"alarms\", payload: alarmTexts }\n];\n\n\n\n/*\n\n// ç”Ÿäº§æ¨¡å—çŠ¶æ€å®šä¹‰\nconst modules = [\n    {name: \"æ··å‡åœŸåˆ¶å¤‡\", status: \"è¿è¡Œ\", progress: 0, color: \"green\"},\n    {name: \"æ¨¡å…·ç»„è£…\", status: \"è¿è¡Œ\", progress: 0, color: \"yellow\"},\n    {name: \"é’¢ç­‹ç½‘ç‰‡å®‰è£…\", status: \"è¿è¡Œ\", progress: 0, color: \"green\"},\n    {name: \"æ··å‡åœŸæµ‡ç­‘\", status: \"è¿è¡Œ\", progress: 0, color: \"red\"},\n    {name: \"å…»æŠ¤\", status: \"è¿è¡Œ\", progress: 0, color: \"green\"},\n    {name: \"è„±æ¨¡ä¸èµ·åŠ\", status: \"è¿è¡Œ\", progress: 0, color: \"green\"},\n    {name: \"æˆå“è´¨æ£€\", status: \"è¿è¡Œ\", progress: 0, color: \"green\"},\n    {name: \"å…¥åº“ç®¡ç†\", status: \"è¿è¡Œ\", progress: 0, color: \"green\"}\n];\n\n// è·å–æˆ–åˆå§‹åŒ–å…¨å±€æ•°æ®\nlet globalData = global.get(\"productionData\") || {\n    dailyTarget: 200,\n    dailyCompleted: 0,\n    currentHourProduced: 0,\n    modules: modules,\n    alarms: [],\n    timestamp: Date.now()\n};\n\n// æ¨¡æ‹Ÿè¿›åº¦æ›´æ–°\nfor(let i = 0; i < globalData.modules.length; i++) {\n    let module = globalData.modules[i];\n    if(module.status === \"è¿è¡Œ\") {\n        module.progress += Math.random() * 5;\n        if(module.progress > 100) {\n            module.progress = Math.random() * 20; // é‡æ–°å¼€å§‹æ–°çš„ç”Ÿäº§å‘¨æœŸ\n            if(i === 0) { // æ··å‡åœŸåˆ¶å¤‡å®Œæˆï¼Œå¢åŠ äº§é‡\n                globalData.currentHourProduced += 1;\n                globalData.dailyCompleted += 1;\n            }\n        }\n    } else if(module.status === \"å¾…æ–™\") {\n        module.progress = 0;\n    } else if(module.status === \"æ•…éšœ\") {\n        module.progress = Math.max(0, module.progress - 1);\n    }\n}\n\nif(globalData.dailyCompleted >= globalData.dailyTarget){\n    // è¿™é‡Œè®¾ç½®é‡ç½®\n    globalData.dailyCompleted = 0;\n\n    // å¦‚æœéœ€è¦ï¼Œä¹Ÿå¯ä»¥é‡ç½® currentHourProduced æˆ–å…¶å®ƒå˜é‡\n    globalData.currentHourProduced = 0;\n\n    // åŒæ—¶å¯ä»¥æ¸…ç©ºæŠ¥è­¦ï¼Œæˆ–è€…åšå…¶å®ƒé€»è¾‘\n    globalData.alarms = [];\n\n    node.warn(\"æ—¥ç”Ÿäº§ç›®æ ‡å·²è¾¾ï¼Œå·²å®Œæˆæ•°é‡å·²é‡ç½®ä¸º0\");\n}\n\n\n\n// æ¨¡æ‹ŸæŠ¥è­¦\nif(Math.random() < 0.1) { // 10%æ¦‚ç‡äº§ç”Ÿæ–°æŠ¥è­¦\n    const alarmTypes = [\n        \"æ¸©åº¦è¶…é™æŠ¥è­¦\",\n        \"å‹åŠ›å¼‚å¸¸æŠ¥è­¦\", \n        \"æ–™ä½ä½æŠ¥è­¦\",\n        \"è®¾å¤‡æ•…éšœæŠ¥è­¦\",\n        \"è´¨é‡å¼‚å¸¸æŠ¥è­¦\"\n    ];\n    const priorities = [\"é«˜\", \"ä¸­\", \"ä½\"];\n    \n    globalData.alarms.push({\n        id: Date.now(),\n        type: alarmTypes[Math.floor(Math.random() * alarmTypes.length)],\n        priority: priorities[Math.floor(Math.random() * priorities.length)],\n        module: modules[Math.floor(Math.random() * modules.length)].name,\n        time: new Date().toLocaleTimeString()\n    });\n}\n\n// é™åˆ¶æŠ¥è­¦æ•°é‡\nif(globalData.alarms.length > 10) {\n    globalData.alarms = globalData.alarms.slice(-10);\n}\n\n\n\n// æ›´æ–°æ—¶é—´æˆ³\nglobalData.timestamp = Date.now();\n\n// ä¿å­˜å…¨å±€æ•°æ®\nglobal.set(\"productionData\", globalData);\n\n// è¿”å›æ›´æ–°åçš„æ•°æ®\nmsg.payload = globalData;\nreturn msg;\n\n*/",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 280,
        "wires": [
            [
                "overview_distributor",
                "20051ddd9e72c26e",
                "8bd7d6c4dc0d4897",
                "dd9c89f17ddc2f90",
                "42dff8e64a5b31d1",
                "module_data_distributor"
            ],
            [],
            [
                "83bb199f49935fac",
                "64427adfc6a7cfca",
                "438171a7dbb989fe",
                "f4791849e38e1a8b",
                "ad624104bcfc386b"
            ]
        ]
    },
    {
        "id": "overview_distributor",
        "type": "function",
        "z": "main_flow_tab",
        "d": true,
        "name": "æ€»è§ˆæ•°æ®åˆ†å‘å™¨",
        "func": "const data = msg.payload;\n\n// ç”Ÿäº§çº¿çŠ¶æ€æ¨¡æ¿\nconst statusTemplate = `\n<div style=\"display: flex; justify-content: space-around; margin: 20px 0; font-family: 'Microsoft YaHei', sans-serif;\">\n    <div style=\"text-align: center;\">\n        <div style=\"font-size: 24px; color: #4B7C95; margin-bottom: 5px;\">ğŸ“Š</div>\n        <div style=\"font-size: 14px; color: #666;\">ä»Šæ—¥ç›®æ ‡</div>\n        <div style=\"font-size: 20px; font-weight: bold; color: #333;\">${data.dailyTarget}ä»¶</div>\n    </div>\n    <div style=\"text-align: center;\">\n        <div style=\"font-size: 24px; color: #4B7C95; margin-bottom: 5px;\">âœ…</div>\n        <div style=\"font-size: 14px; color: #666;\">å·²å®Œæˆ</div>\n        <div style=\"font-size: 20px; font-weight: bold; color: #28a745;\">${data.dailyCompleted}ä»¶</div>\n    </div>\n    <div style=\"text-align: center;\">\n        <div style=\"font-size: 24px; color: #4B7C95; margin-bottom: 5px;\">ğŸ“ˆ</div>\n        <div style=\"font-size: 14px; color: #666;\">å®Œæˆç‡</div>\n        <div style=\"font-size: 20px; font-weight: bold; color: ${data.dailyCompleted/data.dailyTarget > 0.8 ? '#28a745' : '#ffc107'};\">${Math.round(data.dailyCompleted/data.dailyTarget*100)}%</div>\n    </div>\n    <div style=\"text-align: center;\">\n        <div style=\"font-size: 24px; color: #4B7C95; margin-bottom: 5px;\">ğŸ””</div>\n        <div style=\"font-size: 14px; color: #666;\">æ´»è·ƒæŠ¥è­¦</div>\n        <div style=\"font-size: 20px; font-weight: bold; color: ${data.alarms.length > 5 ? '#dc3545' : '#28a745'};\">${data.alarms.length}æ¡</div>\n    </div>\n</div>\n\n<div style=\"margin: 20px 0;\">\n    <h4 style=\"color: #4B7C95; margin-bottom: 15px;\">ğŸ­ ç”Ÿäº§æ¨¡å—çŠ¶æ€</h4>\n    <div style=\"display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px;\">\n        ${data.modules.map((module, index) => {\n            const statusColors = {\n                'è¿è¡Œ': '#28a745',\n                'å¾…æ–™': '#ffc107', \n                'æ•…éšœ': '#dc3545',\n                'ç»´æŠ¤': '#6c757d'\n            };\n            const statusColor = statusColors[module.status] || '#6c757d';\n            const progressWidth = Math.round(module.progress);\n            \n            return `\n            <div style=\"\n                background: linear-gradient(145deg, #f8f9fa, #e9ecef);\n                border-radius: 12px;\n                padding: 15px;\n                box-shadow: 0 4px 6px rgba(0,0,0,0.1);\n                border-left: 4px solid ${statusColor};\n            \">\n                <div style=\"font-size: 12px; color: #666; margin-bottom: 5px;\">æ¨¡å— ${index + 1}</div>\n                <div style=\"font-size: 14px; font-weight: bold; color: #333; margin-bottom: 8px;\">${module.name}</div>\n                <div style=\"\n                    display: inline-block;\n                    padding: 2px 8px;\n                    background: ${statusColor};\n                    color: white;\n                    border-radius: 12px;\n                    font-size: 11px;\n                    margin-bottom: 8px;\n                \">${module.status}</div>\n                <div style=\"\n                    background: #e9ecef;\n                    border-radius: 10px;\n                    height: 6px;\n                    overflow: hidden;\n                    margin-bottom: 5px;\n                \">\n                    <div style=\"\n                        background: ${statusColor};\n                        height: 100%;\n                        width: ${progressWidth}%;\n                        transition: width 0.3s ease;\n                    \"></div>\n                </div>\n                <div style=\"font-size: 10px; color: #666; text-align: right;\">${progressWidth}%</div>\n            </div>\n            `;\n        }).join('')}\n    </div>\n</div>\n`;\n\n\n// å‘é€çŠ¶æ€æ¨¡æ¿\nnode.send([{payload: statusTemplate, topic: \"status_template\"}, null, null]);\n\n// å‘é€ç”Ÿäº§ç»Ÿè®¡æ•°æ®\n/*const statsData = {\n    labels: [\"ç›®æ ‡\", \"å®Œæˆ\", \"å‰©ä½™\"],\n    datasets: [{\n        data: [data.dailyTarget, data.dailyCompleted, Math.max(0, data.dailyTarget - data.dailyCompleted)],\n        backgroundColor: ['#4B7C95', '#28a745', '#e9ecef']\n    }]\n};\n*/\nconst statsData = [{\n    series: [\"æ•°é‡\"],\n    data: [[data.dailyTarget, data.dailyCompleted, Math.max(0, data.dailyTarget - data.dailyCompleted)]],\n    labels: [\"ç›®æ ‡\", \"å®Œæˆ\", \"å‰©ä½™\"]\n}];\nnode.send([null, { payload: statsData, topic: \"production_chart\" }, null]);\n\n\n// å‘é€æŠ¥è­¦æ•°æ®\nconst alarmHtml = `\n<div style=\"font-family: 'Microsoft YaHei', sans-serif;\">\n    ${data.alarms.length === 0 ? \n        '<div style=\"text-align: center; padding: 20px; color: #28a745;\">âœ… å½“å‰æ— æ´»è·ƒæŠ¥è­¦</div>' :\n        data.alarms.slice(-5).reverse().map(alarm => {\n            const priorityColors = {'é«˜': '#dc3545', 'ä¸­': '#ffc107', 'ä½': '#17a2b8'};\n            const priorityColor = priorityColors[alarm.priority] || '#6c757d';\n            \n            return `\n            <div style=\"\n                margin-bottom: 10px;\n                padding: 12px;\n                border-radius: 8px;\n                border-left: 4px solid ${priorityColor};\n                background: #f8f9fa;\n            \">\n                <div style=\"display: flex; justify-content: between; align-items: center;\">\n                    <div>\n                        <div style=\"font-weight: bold; color: #333; margin-bottom: 2px;\">${alarm.type}</div>\n                        <div style=\"font-size: 12px; color: #666;\">${alarm.module} | ${alarm.time}</div>\n                    </div>\n                    <div style=\"\n                        background: ${priorityColor};\n                        color: white;\n                        padding: 2px 6px;\n                        border-radius: 4px;\n                        font-size: 10px;\n                        margin-left: 10px;\n                    \">${alarm.priority}</div>\n                </div>\n            </div>\n            `;\n        }).join('')\n    }\n</div>\n`;\n\nnode.send([null, null, {payload: alarmHtml, topic: \"alarm_list\"}]);\n\nreturn null;",
        "outputs": 3,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1560,
        "y": 280,
        "wires": [
            [
                "b5e77968ad47801a"
            ],
            [
                "production_chart"
            ],
            [
                "alarm_display"
            ]
        ]
    },
    {
        "id": "production_chart",
        "type": "ui_chart",
        "z": "main_flow_tab",
        "d": true,
        "name": "ç”Ÿäº§è¿›åº¦å›¾è¡¨",
        "group": "overview_group2",
        "order": 1,
        "width": "6",
        "height": "4",
        "label": "ä»Šæ—¥ç”Ÿäº§è¿›åº¦",
        "chartType": "pie",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "æš‚æ— æ•°æ®",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 30,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#4b7c95",
            "#28a745",
            "#e9ecef",
            "#ffc107",
            "#dc3545",
            "#17a2b8",
            "#6c757d",
            "#343a40",
            "#f8f9fa"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 1800,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "alarm_display",
        "type": "ui_template",
        "z": "main_flow_tab",
        "d": true,
        "group": "overview_group3",
        "name": "æŠ¥è­¦ä¿¡æ¯æ˜¾ç¤º",
        "order": 1,
        "width": "6",
        "height": "4",
        "format": "<div ng-if=\"msg.payload\" ng-bind-html=\"msg.payload\"></div>\n<div ng-if=\"!msg.payload\" style=\"color:#aaa;text-align:center;padding:20px;\">æš‚æ— æŠ¥è­¦æ•°æ®</div>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 1800,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "module_data_distributor",
        "type": "function",
        "z": "main_flow_tab",
        "name": "æ¨¡å—æ•°æ®åˆ†å‘å™¨",
        "func": "const data = msg.payload;\n\n// ä¸ºæ¯ä¸ªæ¨¡å—ç”Ÿæˆå…·ä½“çš„æ¨¡æ‹Ÿæ•°æ®\nconst moduleData = {\n    // æ¨¡å—1: æ··å‡åœŸåˆ¶å¤‡\n    module1: {\n        materials: {\n            cement: 85 + Math.random() * 10,\n            sand: 70 + Math.random() * 15,\n            gravel: 90 + Math.random() * 8,\n            water: 95 + Math.random() * 5,\n            additive: 60 + Math.random() * 20\n        },\n        mixer: {\n            speed: 45 + Math.random() * 10,\n            power: 75 + Math.random() * 15,\n            temperature: 25 + Math.random() * 5\n        },\n        quality: {\n            slump: 180 + Math.random() * 20,\n            strength: 28 + Math.random() * 2,\n            density: 2400 + Math.random() * 50\n        }\n    },\n    // æ¨¡å—2: æ¨¡å…·ç»„è£…\n    module2: {\n        molds: {\n            available: 45,\n            inUse: 12,\n            cleaning: 3,\n            maintenance: 2\n        },\n        assembly: {\n            position_accuracy: 98.5 + Math.random() * 1,\n            lock_status: Math.random() > 0.1 ? \"å·²é”ç´§\" : \"å¾…é”ç´§\",\n            cleaning_pressure: 2.5 + Math.random() * 0.3\n        }\n    },\n    // æ¨¡å—3: é’¢ç­‹ç½‘ç‰‡å®‰è£…  \n    module3: {\n        rebar: {\n            inventory: 156,\n            specifications: \"Î¦12@200\",\n            position_x: 1250.5 + Math.random() * 2,\n            position_y: 800.2 + Math.random() * 2,\n            installation_force: 850 + Math.random() * 100\n        },\n        mesh: {\n            inventory: 89,\n            specifications: \"200x200x6\",\n            coverage: 95 + Math.random() * 4\n        }\n    },\n    // æ¨¡å—4: æ··å‡åœŸæµ‡ç­‘\n    module4: {\n        pouring: {\n            flow_rate: 15.5 + Math.random() * 3,\n            pressure: 1.8 + Math.random() * 0.2,\n            temperature: 23 + Math.random() * 3,\n            height: 450 + Math.random() * 50\n        },\n        vibration: {\n            frequency: 50 + Math.random() * 5,\n            amplitude: 0.8 + Math.random() * 0.2,\n            duration: 120 + Math.random() * 30\n        }\n    },\n    // æ¨¡å—5: å…»æŠ¤\n    module5: {\n        chamber1: {\n            temperature: 65 + Math.random() * 5,\n            humidity: 85 + Math.random() * 10,\n            pressure: 1.05 + Math.random() * 0.1,\n            time_remaining: 420 - Math.random() * 60\n        },\n        chamber2: {\n            temperature: 70 + Math.random() * 5,\n            humidity: 90 + Math.random() * 8,\n            pressure: 1.08 + Math.random() * 0.1,\n            time_remaining: 180 - Math.random() * 30\n        }\n    },\n    // æ¨¡å—6: è„±æ¨¡ä¸èµ·åŠ\n    module6: {\n        demolding: {\n            force: 1250 + Math.random() * 200,\n            success_rate: 98.5 + Math.random() * 1,\n            cycle_time: 180 + Math.random() * 30\n        },\n        crane: {\n            load: 2.5 + Math.random() * 0.5,\n            height: 8.5 + Math.random() * 1,\n            position: \"åŒºåŸŸB-03\",\n            status: Math.random() > 0.1 ? \"æ­£å¸¸\" : \"ç»´æŠ¤\"\n        }\n    },\n    // æ¨¡å—7: æˆå“è´¨æ£€\n    module7: {\n        dimensions: {\n            length: 2998 + Math.random() * 4,\n            width: 1498 + Math.random() * 3,\n            height: 199.5 + Math.random() * 1,\n            tolerance: \"Â±2mm\"\n        },\n        quality: {\n            surface_grade: \"Açº§\",\n            strength_grade: \"C30\",\n            pass_rate: 96.5 + Math.random() * 2.5,\n            defect_count: Math.floor(Math.random() * 3)\n        }\n    },\n    // æ¨¡å—8: å…¥åº“ç®¡ç†\n    module8: {\n        inventory: {\n            total_products: 2456,\n            today_in: data.dailyCompleted,\n            today_out: 145,\n            available_space: 85 + Math.random() * 10\n        },\n        logistics: {\n            pending_orders: 23,\n            shipping_today: 12,\n            location_A: 156,\n            location_B: 234,\n            location_C: 189\n        }\n    }\n};\n\n//flow.set(\"precast_concrete_productionline1\", moduleData);\n//flow.set(\"precast_line1.module1_concrete_preparation.cement\", moduleData.module1.materials.cement);\n\n// æ¨¡å—1ï¼šæ··å‡åœŸåˆ¶å¤‡\nflow.set(\"precast_concrete_productionline1.module1_concrete_preparation.materials.cement\", moduleData.module1.materials.cement);\nflow.set(\"precast_concrete_productionline1.module1_concrete_preparation.materials.sand\", moduleData.module1.materials.sand);\nflow.set(\"precast_concrete_productionline1.module1_concrete_preparation.materials.gravel\", moduleData.module1.materials.gravel);\nflow.set(\"precast_concrete_productionline1.module1_concrete_preparation.materials.water\", moduleData.module1.materials.water);\nflow.set(\"precast_concrete_productionline1.module1_concrete_preparation.materials.additive\", moduleData.module1.materials.additive);\nflow.set(\"precast_concrete_productionline1.module1_concrete_preparation.mixer.speed\", moduleData.module1.mixer.speed);\nflow.set(\"precast_concrete_productionline1.module1_concrete_preparation.mixer.power\", moduleData.module1.mixer.power);\nflow.set(\"precast_concrete_productionline1.module1_concrete_preparation.mixer.temperature\", moduleData.module1.mixer.temperature);\nflow.set(\"precast_concrete_productionline1.module1_concrete_preparation.quality.slump\", moduleData.module1.quality.slump);\nflow.set(\"precast_concrete_productionline1.module1_concrete_preparation.quality.strength\", moduleData.module1.quality.strength);\nflow.set(\"precast_concrete_productionline1.module1_concrete_preparation.quality.density\", moduleData.module1.quality.density);\n\n\n// æ¨¡å—2ï¼šæ¨¡å…·ç»„è£…\nflow.set(\"precast_concrete_productionline1.module2_mold_assembly.molds.available\", moduleData.module2.molds.available);\nflow.set(\"precast_concrete_productionline1.module2_mold_assembly.molds.inUse\", moduleData.module2.molds.inUse);\nflow.set(\"precast_concrete_productionline1.module2_mold_assembly.molds.cleaning\", moduleData.module2.molds.cleaning);\nflow.set(\"precast_concrete_productionline1.module2_mold_assembly.molds.maintenance\", moduleData.module2.molds.maintenance);\nflow.set(\"precast_concrete_productionline1.module2_mold_assembly.assembly.position_accuracy\", moduleData.module2.assembly.position_accuracy);\nflow.set(\"precast_concrete_productionline1.module2_mold_assembly.assembly.lock_status\", moduleData.module2.assembly.lock_status);\nflow.set(\"precast_concrete_productionline1.module2_mold_assembly.assembly.cleaning_pressure\", moduleData.module2.assembly.cleaning_pressure);\n\n\n// æ¨¡å—3ï¼šé’¢ç­‹ç½‘ç‰‡å®‰è£…\nflow.set(\"precast_concrete_productionline1.module3_rebar_installation.rebar.inventory\", moduleData.module3.rebar.inventory);\nflow.set(\"precast_concrete_productionline1.module3_rebar_installation.rebar.specifications\", moduleData.module3.rebar.specifications);\nflow.set(\"precast_concrete_productionline1.module3_rebar_installation.rebar.position_x\", moduleData.module3.rebar.position_x);\nflow.set(\"precast_concrete_productionline1.module3_rebar_installation.rebar.position_y\", moduleData.module3.rebar.position_y);\nflow.set(\"precast_concrete_productionline1.module3_rebar_installation.rebar.installation_force\", moduleData.module3.rebar.installation_force);\nflow.set(\"precast_concrete_productionline1.module3_rebar_installation.mesh.inventory\", moduleData.module3.mesh.inventory);\nflow.set(\"precast_concrete_productionline1.module3_rebar_installation.mesh.specifications\", moduleData.module3.mesh.specifications);\nflow.set(\"precast_concrete_productionline1.module3_rebar_installation.mesh.coverage\", moduleData.module3.mesh.coverage);\n\n\n// æ¨¡å—4ï¼šæ··å‡åœŸæµ‡ç­‘\nflow.set(\"precast_concrete_productionline1.module4_pouring.pouring.flow_rate\", moduleData.module4.pouring.flow_rate);\nflow.set(\"precast_concrete_productionline1.module4_pouring.pouring.pressure\", moduleData.module4.pouring.pressure);\nflow.set(\"precast_concrete_productionline1.module4_pouring.pouring.temperature\", moduleData.module4.pouring.temperature);\nflow.set(\"precast_concrete_productionline1.module4_pouring.pouring.height\", moduleData.module4.pouring.height);\nflow.set(\"precast_concrete_productionline1.module4_pouring.vibration.frequency\", moduleData.module4.vibration.frequency);\nflow.set(\"precast_concrete_productionline1.module4_pouring.vibration.amplitude\", moduleData.module4.vibration.amplitude);\nflow.set(\"precast_concrete_productionline1.module4_pouring.vibration.duration\", moduleData.module4.vibration.duration);\n\n\n// æ¨¡å—5ï¼šå…»æŠ¤\nflow.set(\"precast_concrete_productionline1.module5_curing.chamber1.temperature\", moduleData.module5.chamber1.temperature);\nflow.set(\"precast_concrete_productionline1.module5_curing.chamber1.humidity\", moduleData.module5.chamber1.humidity);\nflow.set(\"precast_concrete_productionline1.module5_curing.chamber1.pressure\", moduleData.module5.chamber1.pressure);\nflow.set(\"precast_concrete_productionline1.module5_curing.chamber1.time_remaining\", moduleData.module5.chamber1.time_remaining);\nflow.set(\"precast_concrete_productionline1.module5_curing.chamber2.temperature\", moduleData.module5.chamber2.temperature);\nflow.set(\"precast_concrete_productionline1.module5_curing.chamber2.humidity\", moduleData.module5.chamber2.humidity);\nflow.set(\"precast_concrete_productionline1.module5_curing.chamber2.pressure\", moduleData.module5.chamber2.pressure);\nflow.set(\"precast_concrete_productionline1.module5_curing.chamber2.time_remaining\", moduleData.module5.chamber2.time_remaining);\n\n\n// æ¨¡å—6ï¼šè„±æ¨¡ä¸èµ·åŠ\nflow.set(\"precast_concrete_productionline1.module6_demolding.demolding.force\", moduleData.module6.demolding.force);\nflow.set(\"precast_concrete_productionline1.module6_demolding.demolding.success_rate\", moduleData.module6.demolding.success_rate);\nflow.set(\"precast_concrete_productionline1.module6_demolding.demolding.cycle_time\", moduleData.module6.demolding.cycle_time);\nflow.set(\"precast_concrete_productionline1.module6_demolding.crane.load\", moduleData.module6.crane.load);\nflow.set(\"precast_concrete_productionline1.module6_demolding.crane.height\", moduleData.module6.crane.height);\nflow.set(\"precast_concrete_productionline1.module6_demolding.crane.position\", moduleData.module6.crane.position);\nflow.set(\"precast_concrete_productionline1.module6_demolding.crane.status\", moduleData.module6.crane.status);\n\n\n// æ¨¡å—7ï¼šæˆå“è´¨æ£€\nflow.set(\"precast_concrete_productionline1.module7_quality_check.dimensions.length\", moduleData.module7.dimensions.length);\nflow.set(\"precast_concrete_productionline1.module7_quality_check.dimensions.width\", moduleData.module7.dimensions.width);\nflow.set(\"precast_concrete_productionline1.module7_quality_check.dimensions.height\", moduleData.module7.dimensions.height);\nflow.set(\"precast_concrete_productionline1.module7_quality_check.dimensions.tolerance\", moduleData.module7.dimensions.tolerance);\nflow.set(\"precast_concrete_productionline1.module7_quality_check.quality.surface_grade\", moduleData.module7.quality.surface_grade);\nflow.set(\"precast_concrete_productionline1.module7_quality_check.quality.strength_grade\", moduleData.module7.quality.strength_grade);\nflow.set(\"precast_concrete_productionline1.module7_quality_check.quality.pass_rate\", moduleData.module7.quality.pass_rate);\nflow.set(\"precast_concrete_productionline1.module7_quality_check.quality.defect_count\", moduleData.module7.quality.defect_count);\n\n\n// æ¨¡å—8ï¼šå…¥åº“ç®¡ç†\nflow.set(\"precast_concrete_productionline1.module8_inventory_management.inventory.total_products\", moduleData.module8.inventory.total_products);\nflow.set(\"precast_concrete_productionline1.module8_inventory_management.inventory.today_in\", moduleData.module8.inventory.today_in);\nflow.set(\"precast_concrete_productionline1.module8_inventory_management.inventory.today_out\", moduleData.module8.inventory.today_out);\nflow.set(\"precast_concrete_productionline1.module8_inventory_management.inventory.available_space\", moduleData.module8.inventory.available_space);\nflow.set(\"precast_concrete_productionline1.module8_inventory_management.logistics.pending_orders\", moduleData.module8.logistics.pending_orders);\nflow.set(\"precast_concrete_productionline1.module8_inventory_management.logistics.shipping_today\", moduleData.module8.logistics.shipping_today);\nflow.set(\"precast_concrete_productionline1.module8_inventory_management.logistics.location_A\", moduleData.module8.logistics.location_A);\nflow.set(\"precast_concrete_productionline1.module8_inventory_management.logistics.location_B\", moduleData.module8.logistics.location_B);\nflow.set(\"precast_concrete_productionline1.module8_inventory_management.logistics.location_C\", moduleData.module8.logistics.location_C);\n\n\n\n// å‘é€å„æ¨¡å—æ•°æ®\nreturn [\n    {payload: moduleData.module1, topic: \"module1_data\"},\n    {payload: moduleData.module2, topic: \"module2_data\"},\n    {payload: moduleData.module3, topic: \"module3_data\"},\n    {payload: moduleData.module4, topic: \"module4_data\"},\n    {payload: moduleData.module5, topic: \"module5_data\"},\n    {payload: moduleData.module6, topic: \"module6_data\"},\n    {payload: moduleData.module7, topic: \"module7_data\"},\n    {payload: moduleData.module8, topic: \"module8_data\"}\n];",
        "outputs": 8,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 340,
        "y": 860,
        "wires": [
            [
                "module1_ui",
                "m1_equipment_ui",
                "m1_quality_ui",
                "b82288bf6a61ca7b"
            ],
            [
                "module2_ui",
                "m2_assembly_ui",
                "6f26d0cbcb44a082"
            ],
            [
                "module3_ui",
                "m3_mesh_ui",
                "911ddbd63d13f0c5"
            ],
            [
                "module4_ui",
                "m4_vibrate_ui",
                "39d05d6f8e044731"
            ],
            [
                "module5_ui",
                "m5_chamber2_ui",
                "7aa351559763a426"
            ],
            [
                "module6_ui",
                "m6_crane_ui",
                "ed033cfc3e231201"
            ],
            [
                "module7_ui",
                "m7_quality_ui",
                "de08985d68c26b14"
            ],
            [
                "module8_ui",
                "m8_logistics_ui",
                "7c796173bfe9f219"
            ]
        ]
    },
    {
        "id": "module1_ui",
        "type": "ui_template",
        "z": "main_flow_tab",
        "group": "m1_group1",
        "name": "åŸæ–™çŠ¶æ€",
        "order": 1,
        "width": "6",
        "height": "4",
        "format": "<h4>åŸæä½™é‡</h4><ul><li>æ°´æ³¥ï¼š{{msg.payload.materials.cement | number:1}} %</li><li>ç ‚ï¼š{{msg.payload.materials.sand | number:1}} %</li><li>ç¢çŸ³ï¼š{{msg.payload.materials.gravel | number:1}} %</li><li>æ°´ï¼š{{msg.payload.materials.water | number:1}} %</li><li>å¤–åŠ å‰‚ï¼š{{msg.payload.materials.additive | number:1}} %</li></ul>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 980,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "m1_equipment_ui",
        "type": "ui_template",
        "z": "main_flow_tab",
        "group": "m1_group2",
        "name": "æ…æ‹Œè®¾å¤‡",
        "order": 1,
        "width": "6",
        "height": "4",
        "format": "<h4>æ…æ‹ŒæœºçŠ¶æ€</h4><ul><li>è½¬é€Ÿï¼š{{msg.payload.mixer.speed | number:1}} rpm</li><li>åŠŸç‡ï¼š{{msg.payload.mixer.power | number:1}} kW</li><li>æ¸©åº¦ï¼š{{msg.payload.mixer.temperature | number:1}} â„ƒ</li></ul>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": true,
        "templateScope": "local",
        "x": 1140,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "m1_quality_ui",
        "type": "ui_template",
        "z": "main_flow_tab",
        "group": "m1_group3",
        "name": "è´¨é‡å‚æ•°",
        "order": 1,
        "width": "6",
        "height": "4",
        "format": "<h4>å½“å‰è´¨é‡æŒ‡æ ‡</h4><ul><li>å¡Œè½åº¦ï¼š{{msg.payload.quality.slump | number:1}} mm</li><li>æŠ—å‹å¼ºåº¦ï¼š{{msg.payload.quality.strength | number:1}} MPa</li><li>å¯†å®åº¦ï¼š{{msg.payload.quality.density | number:1}} kg/mÂ³</li></ul>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 820,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "module2_ui",
        "type": "ui_template",
        "z": "main_flow_tab",
        "group": "m2_group1",
        "name": "æ¨¡å…·ä¿¡æ¯",
        "order": 1,
        "width": "6",
        "height": "5",
        "format": "<h4>æ¨¡å…·ä½¿ç”¨æƒ…å†µ</h4><ul><li>å¯ç”¨ï¼š{{msg.payload.molds.available}} å¥—</li><li>ä½¿ç”¨ä¸­ï¼š{{msg.payload.molds.inUse}} å¥—</li><li>æ¸…æ´ä¸­ï¼š{{msg.payload.molds.cleaning}} å¥—</li><li>ç»´æŠ¤ï¼š{{msg.payload.molds.maintenance}} å¥—</li></ul>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 900,
        "y": 620,
        "wires": [
            []
        ]
    },
    {
        "id": "m2_assembly_ui",
        "type": "ui_template",
        "z": "main_flow_tab",
        "group": "m2_group2",
        "name": "ç»„è£…çŠ¶æ€",
        "order": 1,
        "width": "6",
        "height": "4",
        "format": "<h4>ç»„è£…å‚æ•°</h4><ul><li>å®šä½ç²¾åº¦ï¼š{{msg.payload.assembly.position_accuracy | number:2}} %</li><li>é”ç´§çŠ¶æ€ï¼š{{msg.payload.assembly.lock_status}}</li><li>æ¸…æ´—å‹åŠ›ï¼š{{msg.payload.assembly.cleaning_pressure | number:1}} bar</li></ul>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": true,
        "templateScope": "local",
        "x": 1080,
        "y": 620,
        "wires": [
            []
        ]
    },
    {
        "id": "module3_ui",
        "type": "ui_template",
        "z": "main_flow_tab",
        "group": "m3_group1",
        "name": "é’¢ç­‹å®‰è£…",
        "order": 1,
        "width": "6",
        "height": "5",
        "format": "<h4>é’¢ç­‹å‚æ•°</h4><ul><li>åº“å­˜ï¼š{{msg.payload.rebar.inventory}} æ ¹</li><li>è§„æ ¼ï¼š{{msg.payload.rebar.specifications}}</li><li>å®‰è£…ä½ç½®ï¼šX={{msg.payload.rebar.position_x | number:1}} Y={{msg.payload.rebar.position_y | number:1}}</li><li>å®‰è£…åŠ›ï¼š{{msg.payload.rebar.installation_force | number:0}} N</li></ul>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 900,
        "y": 740,
        "wires": [
            []
        ]
    },
    {
        "id": "m3_mesh_ui",
        "type": "ui_template",
        "z": "main_flow_tab",
        "group": "m3_group2",
        "name": "ç½‘ç‰‡å‚æ•°",
        "order": 1,
        "width": "6",
        "height": "4",
        "format": "<h4>ç½‘ç‰‡å‚æ•°</h4><ul><li>åº“å­˜ï¼š{{msg.payload.mesh.inventory}} å¼ </li><li>è§„æ ¼ï¼š{{msg.payload.mesh.specifications}}</li><li>é“ºè®¾è¦†ç›–ç‡ï¼š{{msg.payload.mesh.coverage | number:1}} %</li></ul>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 1080,
        "y": 740,
        "wires": [
            []
        ]
    },
    {
        "id": "module4_ui",
        "type": "ui_template",
        "z": "main_flow_tab",
        "group": "m4_group1",
        "name": "æµ‡ç­‘è¿‡ç¨‹",
        "order": 1,
        "width": "6",
        "height": "5",
        "format": "<h4>æµ‡ç­‘å‚æ•°</h4><ul><li>æµé‡ï¼š{{msg.payload.pouring.flow_rate | number:1}} mÂ³/h</li><li>å‹åŠ›ï¼š{{msg.payload.pouring.pressure | number:2}} MPa</li><li>æ¸©åº¦ï¼š{{msg.payload.pouring.temperature | number:1}} â„ƒ</li><li>é«˜åº¦ï¼š{{msg.payload.pouring.height | number:0}} mm</li></ul>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 900,
        "y": 860,
        "wires": [
            []
        ]
    },
    {
        "id": "m4_vibrate_ui",
        "type": "ui_template",
        "z": "main_flow_tab",
        "group": "m4_group2",
        "name": "æŒ¯æ£å‚æ•°",
        "order": 1,
        "width": "6",
        "height": "4",
        "format": "<h4>æŒ¯æ£è¿‡ç¨‹</h4><ul><li>é¢‘ç‡ï¼š{{msg.payload.vibration.frequency | number:1}} Hz</li><li>æŒ¯å¹…ï¼š{{msg.payload.vibration.amplitude | number:2}} mm</li><li>æŒç»­æ—¶é—´ï¼š{{msg.payload.vibration.duration | number:0}} s</li></ul>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": true,
        "templateScope": "local",
        "x": 1080,
        "y": 860,
        "wires": [
            []
        ]
    },
    {
        "id": "module5_ui",
        "type": "ui_template",
        "z": "main_flow_tab",
        "group": "m5_group1",
        "name": "å…»æŠ¤ä»“1",
        "order": 1,
        "width": "6",
        "height": "5",
        "format": "<h4>å…»æŠ¤ä»“1å‚æ•°</h4><ul><li>æ¸©åº¦ï¼š{{msg.payload.chamber1.temperature | number:1}} â„ƒ</li><li>æ¹¿åº¦ï¼š{{msg.payload.chamber1.humidity | number:1}} %</li><li>å‹åŠ›ï¼š{{msg.payload.chamber1.pressure | number:2}} bar</li><li>å‰©ä½™æ—¶é—´ï¼š{{msg.payload.chamber1.time_remaining | number:0}} min</li></ul>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": true,
        "templateScope": "local",
        "x": 900,
        "y": 980,
        "wires": [
            []
        ]
    },
    {
        "id": "m5_chamber2_ui",
        "type": "ui_template",
        "z": "main_flow_tab",
        "group": "m5_group2",
        "name": "å…»æŠ¤ä»“2",
        "order": 1,
        "width": "6",
        "height": "4",
        "format": "<h4>å…»æŠ¤ä»“2å‚æ•°</h4><ul><li>æ¸©åº¦ï¼š{{msg.payload.chamber2.temperature | number:1}} â„ƒ</li><li>æ¹¿åº¦ï¼š{{msg.payload.chamber2.humidity | number:1}} %</li><li>å‹åŠ›ï¼š{{msg.payload.chamber2.pressure | number:2}} bar</li><li>å‰©ä½™æ—¶é—´ï¼š{{msg.payload.chamber2.time_remaining | number:0}} min</li></ul>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": true,
        "templateScope": "local",
        "x": 1080,
        "y": 980,
        "wires": [
            []
        ]
    },
    {
        "id": "module6_ui",
        "type": "ui_template",
        "z": "main_flow_tab",
        "group": "m6_group1",
        "name": "è„±æ¨¡å‚æ•°",
        "order": 1,
        "width": "6",
        "height": "5",
        "format": "<h4>è„±æ¨¡å·¥åº</h4><ul><li>è„±æ¨¡åŠ›ï¼š{{msg.payload.demolding.force | number:0}} N</li><li>æˆåŠŸç‡ï¼š{{msg.payload.demolding.success_rate | number:2}} %</li><li>å‘¨æœŸæ—¶é•¿ï¼š{{msg.payload.demolding.cycle_time | number:0}} s</li></ul>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 1080,
        "y": 1100,
        "wires": [
            []
        ]
    },
    {
        "id": "m6_crane_ui",
        "type": "ui_template",
        "z": "main_flow_tab",
        "group": "m6_group2",
        "name": "èµ·åŠå‚æ•°",
        "order": 1,
        "width": "6",
        "height": "4",
        "format": "<h4>èµ·åŠå·¥åº</h4><ul><li>å½“å‰è´Ÿè½½ï¼š{{msg.payload.crane.load | number:1}} t</li><li>å‡é™é«˜åº¦ï¼š{{msg.payload.crane.height | number:2}} m</li><li>ä½ç½®ï¼š{{msg.payload.crane.position}}</li><li>çŠ¶æ€ï¼š{{msg.payload.crane.status}}</li></ul>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": true,
        "templateScope": "local",
        "x": 900,
        "y": 1100,
        "wires": [
            []
        ]
    },
    {
        "id": "module7_ui",
        "type": "ui_template",
        "z": "main_flow_tab",
        "group": "m7_group1",
        "name": "å°ºå¯¸å‚æ•°",
        "order": 1,
        "width": "6",
        "height": "4",
        "format": "<h4>æˆå“å°ºå¯¸</h4><ul><li>é•¿åº¦ï¼š{{msg.payload.dimensions.length | number:1}} mm</li><li>å®½åº¦ï¼š{{msg.payload.dimensions.width | number:1}} mm</li><li>é«˜åº¦ï¼š{{msg.payload.dimensions.height | number:1}} mm</li><li>å°ºå¯¸å…¬å·®ï¼š{{msg.payload.dimensions.tolerance}}</li></ul>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": true,
        "templateScope": "local",
        "x": 1080,
        "y": 1220,
        "wires": [
            []
        ]
    },
    {
        "id": "m7_quality_ui",
        "type": "ui_template",
        "z": "main_flow_tab",
        "group": "m7_group2",
        "name": "è´¨é‡æŒ‡æ ‡",
        "order": 1,
        "width": "6",
        "height": "4",
        "format": "<h4>è´¨é‡æ£€æµ‹</h4><ul><li>è¡¨é¢ç­‰çº§ï¼š{{msg.payload.quality.surface_grade}}</li><li>å¼ºåº¦ç­‰çº§ï¼š{{msg.payload.quality.strength_grade}}</li><li>åˆæ ¼ç‡ï¼š{{msg.payload.quality.pass_rate | number:2}} %</li><li>ç¼ºé™·æ•°ï¼š{{msg.payload.quality.defect_count}}</li></ul>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": true,
        "templateScope": "local",
        "x": 900,
        "y": 1220,
        "wires": [
            []
        ]
    },
    {
        "id": "module8_ui",
        "type": "ui_template",
        "z": "main_flow_tab",
        "group": "m8_group1",
        "name": "åº“å­˜ä¿¡æ¯",
        "order": 1,
        "width": "6",
        "height": "5",
        "format": "<h4>ä»“åº“åº“å­˜</h4><ul><li>æ€»åº“å­˜ï¼š{{msg.payload.inventory.total_products}} ä»¶</li><li>ä»Šæ—¥å…¥åº“ï¼š{{msg.payload.inventory.today_in}} ä»¶</li><li>ä»Šæ—¥å‡ºåº“ï¼š{{msg.payload.inventory.today_out}} ä»¶</li><li>å¯ç”¨é¢ç§¯ï¼š{{msg.payload.inventory.available_space | number:1}} %</li></ul>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": true,
        "templateScope": "local",
        "x": 900,
        "y": 1320,
        "wires": [
            []
        ]
    },
    {
        "id": "m8_logistics_ui",
        "type": "ui_template",
        "z": "main_flow_tab",
        "group": "m8_group2",
        "name": "ç‰©æµä¿¡æ¯",
        "order": 1,
        "width": "6",
        "height": "4",
        "format": "<h4>ç‰©æµä¸åº“åŒº</h4><ul><li>å¾…å‘è´§è®¢å•ï¼š{{msg.payload.logistics.pending_orders}}</li><li>ä»Šæ—¥å‘è´§ï¼š{{msg.payload.logistics.shipping_today}}</li><li>åº“åŒºAå­˜é‡ï¼š{{msg.payload.logistics.location_A}}</li><li>åº“åŒºBå­˜é‡ï¼š{{msg.payload.logistics.location_B}}</li><li>åº“åŒºCå­˜é‡ï¼š{{msg.payload.logistics.location_C}}</li></ul>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": true,
        "templateScope": "local",
        "x": 1080,
        "y": 1320,
        "wires": [
            []
        ]
    },
    {
        "id": "b5e77968ad47801a",
        "type": "ui_template",
        "z": "main_flow_tab",
        "d": true,
        "group": "overview_group1",
        "name": "ç”Ÿäº§çº¿çŠ¶æ€æ˜¾ç¤º",
        "order": 1,
        "width": "12",
        "height": "8",
        "format": "<div ng-bind-html=\"msg.payload\"></div>",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 1800,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "42dff8e64a5b31d1",
        "type": "ui_text",
        "z": "main_flow_tab",
        "group": "group_stats",
        "order": 1,
        "width": 6,
        "height": 1,
        "name": "æ—¥äº§é‡ç›®æ ‡",
        "label": "æ—¥äº§é‡ç›®æ ‡",
        "format": "{{msg.payload.dailyTarget}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 810,
        "y": 200,
        "wires": []
    },
    {
        "id": "8bd7d6c4dc0d4897",
        "type": "ui_text",
        "z": "main_flow_tab",
        "group": "group_stats",
        "order": 2,
        "width": 6,
        "height": 1,
        "name": "å·²å®Œæˆäº§é‡",
        "label": "å·²å®Œæˆäº§é‡",
        "format": "{{msg.payload.dailyCompleted}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 810,
        "y": 120,
        "wires": []
    },
    {
        "id": "cebf59e2a154bd17",
        "type": "ui_gauge",
        "z": "main_flow_tab",
        "name": "å®Œæˆç‡ä»ªè¡¨ç›˜",
        "group": "group_stats",
        "order": 3,
        "width": 6,
        "height": 6,
        "gtype": "wave",
        "title": "å®Œæˆç‡(%)",
        "label": "%",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#ff0000",
            "#e6ff00",
            "#00ff19"
        ],
        "seg1": "50",
        "seg2": "80",
        "diff": false,
        "className": "",
        "x": 1020,
        "y": 60,
        "wires": []
    },
    {
        "id": "dd9c89f17ddc2f90",
        "type": "ui_text",
        "z": "main_flow_tab",
        "group": "group_stats",
        "order": 4,
        "width": 6,
        "height": 1,
        "name": "å‘Šè­¦æ•°é‡",
        "label": "å‘Šè­¦æ•°é‡",
        "format": "{{msg.payload.alarmCount}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 1100,
        "y": 180,
        "wires": []
    },
    {
        "id": "f5d8ad844640e02a",
        "type": "ui_text",
        "z": "main_flow_tab",
        "group": "group_modules",
        "order": 1,
        "width": 12,
        "height": 1,
        "name": "æ¨¡å—1",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 1150,
        "y": 460,
        "wires": []
    },
    {
        "id": "15cb331111c56fec",
        "type": "ui_text",
        "z": "main_flow_tab",
        "group": "group_modules",
        "order": 2,
        "width": 12,
        "height": 1,
        "name": "æ¨¡å—2",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 1150,
        "y": 580,
        "wires": []
    },
    {
        "id": "a8c9437fc755a4f6",
        "type": "ui_text",
        "z": "main_flow_tab",
        "group": "group_modules",
        "order": 3,
        "width": 12,
        "height": 1,
        "name": "æ¨¡å—3",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 1150,
        "y": 700,
        "wires": []
    },
    {
        "id": "2ff73753b3853b8e",
        "type": "ui_text",
        "z": "main_flow_tab",
        "group": "group_modules",
        "order": 4,
        "width": 12,
        "height": 1,
        "name": "æ¨¡å—4",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 1150,
        "y": 820,
        "wires": []
    },
    {
        "id": "d2925983fe8f6e22",
        "type": "ui_text",
        "z": "main_flow_tab",
        "group": "group_modules",
        "order": 5,
        "width": 12,
        "height": 1,
        "name": "æ¨¡å—5",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 1150,
        "y": 940,
        "wires": []
    },
    {
        "id": "eb4f33211ed95194",
        "type": "ui_text",
        "z": "main_flow_tab",
        "group": "group_modules",
        "order": 6,
        "width": 12,
        "height": 1,
        "name": "æ¨¡å—6",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 1150,
        "y": 1060,
        "wires": []
    },
    {
        "id": "5b1119906063b61d",
        "type": "ui_text",
        "z": "main_flow_tab",
        "group": "group_modules",
        "order": 7,
        "width": 12,
        "height": 1,
        "name": "æ¨¡å—7",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 1170,
        "y": 1180,
        "wires": []
    },
    {
        "id": "3884b4df3d57760f",
        "type": "ui_text",
        "z": "main_flow_tab",
        "group": "group_modules",
        "order": 8,
        "width": 12,
        "height": 1,
        "name": "æ¨¡å—8",
        "label": "",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 1170,
        "y": 1280,
        "wires": []
    },
    {
        "id": "83bb199f49935fac",
        "type": "ui_text",
        "z": "main_flow_tab",
        "group": "group_alarms",
        "order": 1,
        "width": 12,
        "height": 1,
        "name": "å‘Šè­¦1",
        "label": "",
        "format": "{{msg.payload[0] || ''}}",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 1090,
        "y": 220,
        "wires": []
    },
    {
        "id": "64427adfc6a7cfca",
        "type": "ui_text",
        "z": "main_flow_tab",
        "group": "group_alarms",
        "order": 2,
        "width": 12,
        "height": 1,
        "name": "å‘Šè­¦2",
        "label": "",
        "format": "{{msg.payload[1] || ''}}",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 1090,
        "y": 260,
        "wires": []
    },
    {
        "id": "438171a7dbb989fe",
        "type": "ui_text",
        "z": "main_flow_tab",
        "group": "group_alarms",
        "order": 3,
        "width": 12,
        "height": 1,
        "name": "å‘Šè­¦3",
        "label": "",
        "format": "{{msg.payload[2] || ''}}",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 1090,
        "y": 300,
        "wires": []
    },
    {
        "id": "f4791849e38e1a8b",
        "type": "ui_text",
        "z": "main_flow_tab",
        "group": "group_alarms",
        "order": 4,
        "width": 12,
        "height": 1,
        "name": "å‘Šè­¦4",
        "label": "",
        "format": "{{msg.payload[3] || ''}}",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 1090,
        "y": 340,
        "wires": []
    },
    {
        "id": "ad624104bcfc386b",
        "type": "ui_text",
        "z": "main_flow_tab",
        "group": "group_alarms",
        "order": 5,
        "width": 12,
        "height": 1,
        "name": "å‘Šè­¦5",
        "label": "",
        "format": "{{msg.payload[4] || ''}}",
        "layout": "row-left",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": "",
        "color": "#000000",
        "x": 1090,
        "y": 380,
        "wires": []
    },
    {
        "id": "20051ddd9e72c26e",
        "type": "function",
        "z": "main_flow_tab",
        "name": "è·å–å½“æ—¥å®Œæˆç‡",
        "func": "\n\n\nmsg.payload = \nMath.round((msg.payload.dailyCompleted / msg.payload.dailyTarget) * 100);\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 820,
        "y": 60,
        "wires": [
            [
                "cebf59e2a154bd17"
            ]
        ]
    },
    {
        "id": "b82288bf6a61ca7b",
        "type": "function",
        "z": "main_flow_tab",
        "name": "function 1",
        "func": "let mat = msg.payload.materials;\nmsg.payload =\n    `æ··å‡åœŸé¢„å¤‡: ${mat.cement.toFixed(2)}kgï¼Œå¤–åŠ å‰‚: ${mat.additive.toFixed(2)}kg`;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 820,
        "y": 460,
        "wires": [
            [
                "f5d8ad844640e02a"
            ]
        ]
    },
    {
        "id": "6f26d0cbcb44a082",
        "type": "function",
        "z": "main_flow_tab",
        "name": "function 2",
        "func": "let molds = msg.payload.molds;\nlet ass = msg.payload.assembly;\nmsg.payload =\n    `æ¨¡å…·ç»„è£…:\\n` +\n    `æ¨¡å…·-å¯ç”¨: ${molds.available}ï¼Œåœ¨ç”¨: ${molds.inUse}ï¼Œæ¸…æ´—: ${molds.cleaning}ï¼Œç»´æŠ¤: ${molds.maintenance}\\n`\n    ;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 820,
        "y": 580,
        "wires": [
            [
                "15cb331111c56fec"
            ]
        ]
    },
    {
        "id": "911ddbd63d13f0c5",
        "type": "function",
        "z": "main_flow_tab",
        "name": "function 3",
        "func": "/*\nlet rebar = msg.payload.rebar;\nlet mesh = msg.payload.mesh;\nmsg.payload =\n    `é’¢ç­‹ç½‘ç‰‡å®‰è£…:\\n` +\n    `é’¢ç­‹-åº“å­˜: ${ rebar.inventory }ï¼Œç½‘ç‰‡-åº“å­˜: ${ mesh.inventory } \\n`\n    ;\nreturn msg;\n*/\n\n\nlet rebar = msg.payload.rebar;\nlet mesh = msg.payload.mesh;\nmsg.payload =\n    `<span style=\"color:red;\">é’¢ç­‹ç½‘ç‰‡å®‰è£…</span>:\\n` +\n    `é’¢ç­‹-åº“å­˜: ${rebar.inventory}ï¼Œç½‘ç‰‡-åº“å­˜: ${mesh.inventory}\\n`;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 820,
        "y": 700,
        "wires": [
            [
                "a8c9437fc755a4f6"
            ]
        ],
        "info": "<div style=\"white-space:pre-line;\">{{{msg.payload}}}</div>"
    },
    {
        "id": "39d05d6f8e044731",
        "type": "function",
        "z": "main_flow_tab",
        "name": "function 4",
        "func": "let pour = msg.payload.pouring;\nlet vib = msg.payload.vibration;\nmsg.payload =\n    `æ··å‡åœŸæµ‡ç­‘:\\n` +\n    `æµé‡: ${pour.flow_rate.toFixed(2)}mÂ³/hï¼Œå‹åŠ›: ${pour.pressure.toFixed(2)}MPaï¼Œæ¸©åº¦: ${pour.temperature.toFixed(2)}â„ƒ`;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 820,
        "y": 820,
        "wires": [
            [
                "2ff73753b3853b8e"
            ]
        ]
    },
    {
        "id": "7aa351559763a426",
        "type": "function",
        "z": "main_flow_tab",
        "name": "function 5",
        "func": "let c1 = msg.payload.chamber1;\nlet c2 = msg.payload.chamber2;\nmsg.payload =\n    `å…»æŠ¤: \\n` +\n    `1å·å®¤-æ¸©åº¦: ${c1.temperature.toFixed(2)}â„ƒï¼Œ å‹åŠ›: ${c1.pressure.toFixed(2)}MPa \\n` +\n    `2å·å®¤-æ¸©åº¦: ${c2.temperature.toFixed(2)}â„ƒï¼Œ å‹åŠ›: ${c2.pressure.toFixed(2)}MPa`;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 820,
        "y": 940,
        "wires": [
            [
                "d2925983fe8f6e22"
            ]
        ]
    },
    {
        "id": "ed033cfc3e231201",
        "type": "function",
        "z": "main_flow_tab",
        "name": "function 6",
        "func": "let dem = msg.payload.demolding;\nlet crane = msg.payload.crane;\nmsg.payload =\n    `è„±æ¨¡ä¸èµ·åŠ:` +\n    `çŠ¶æ€: ${crane.status}`;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 820,
        "y": 1060,
        "wires": [
            [
                "eb4f33211ed95194"
            ]
        ]
    },
    {
        "id": "de08985d68c26b14",
        "type": "function",
        "z": "main_flow_tab",
        "name": "function 7",
        "func": "let dim = msg.payload.dimensions;\nlet qual = msg.payload.quality;\nmsg.payload =\n    `æˆå“è´¨æ£€:\\n` +\n    `è´¨é‡-è¡¨é¢: ${qual.surface_grade}ï¼Œåˆæ ¼ç‡: ${qual.pass_rate.toFixed(2)}%ï¼Œç¼ºé™·æ•°: ${qual.defect_count}`;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 820,
        "y": 1180,
        "wires": [
            [
                "5b1119906063b61d"
            ]
        ]
    },
    {
        "id": "7c796173bfe9f219",
        "type": "function",
        "z": "main_flow_tab",
        "name": "function 8",
        "func": "let inv = msg.payload.inventory;\nlet log = msg.payload.logistics;\nmsg.payload =\n    `ä»“åº“ç®¡ç†:\\n` +\n    `æ€»æ•°: ${inv.total_products}ï¼Œä»Šæ—¥å…¥åº“: ${inv.today_in}ï¼Œä»Šæ—¥å‡ºåº“: ${inv.today_out}ï¼Œç©ºä½™ä½: ${inv.available_space.toFixed(2)}\\n` +\n    `ç‰©æµ-å¾…å‘: ${log.pending_orders}ï¼Œä»Šæ—¥å‘è´§: ${log.shipping_today}ï¼ŒAåŒº: ${log.location_A}ï¼ŒBåŒº: ${log.location_B}ï¼ŒCåŒº: ${log.location_C}`;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 820,
        "y": 1280,
        "wires": [
            [
                "3884b4df3d57760f"
            ]
        ]
    },
    {
        "id": "1b0045b713437721",
        "type": "opcua-compact-server",
        "z": "main_flow_tab",
        "port": "4842",
        "endpoint": "",
        "productUri": "",
        "acceptExternalCommands": true,
        "maxAllowedSessionNumber": "10",
        "maxConnectionsPerEndpoint": "10",
        "maxAllowedSubscriptionNumber": "100",
        "alternateHostname": "",
        "name": "OPCUA_Server_Precast_Concrete_Production_Line1_FieldLevel",
        "showStatusActivities": true,
        "showErrors": true,
        "allowAnonymous": true,
        "individualCerts": false,
        "isAuditing": false,
        "serverDiscovery": true,
        "users": [],
        "xmlsetsOPCUA": [],
        "publicCertificateFile": "",
        "privateCertificateFile": "",
        "registerServerMethod": "1",
        "discoveryServerEndpointUrl": "opc.tcp://127.0.0.1:4842",
        "capabilitiesForMDNS": "",
        "maxNodesPerRead": 1000,
        "maxNodesPerWrite": 1000,
        "maxNodesPerHistoryReadData": 100,
        "maxNodesPerBrowse": 3000,
        "maxBrowseContinuationPoints": "10",
        "maxHistoryContinuationPoints": "10",
        "delayToInit": "1000",
        "delayToClose": "200",
        "serverShutdownTimeout": "100",
        "addressSpaceScript": "function constructAlarmAddressSpace(server, addressSpace, eventObjects, done) {\n  // server = the created node-opcua server\n  // addressSpace = address space of the node-opcua server\n  // eventObjects = add event variables here to hold them in memory from this script\n\n  // internal sandbox objects are:\n  // node = the compact server node,\n  // coreServer = core compact server object for debug and access to NodeOPCUA\n  // this.sandboxNodeContext = node context node-red\n  // this.sandboxFlowContext = flow context node-red\n  // this.sandboxGlobalContext = global context node-red\n  // this.sandboxEnv = env variables\n  // timeout and interval functions as expected from nodejs\n\n  const opcua = coreServer.choreCompact.opcua;\n  const LocalizedText = opcua.LocalizedText;\n  const namespace = addressSpace.getOwnNamespace();\n\n  const Variant = opcua.Variant;\n  const DataType = opcua.DataType;\n  const DataValue = opcua.DataValue;\n\n  var flexServerInternals = this;\n\n  coreServer.debugLog(\"init dynamic address space\");\n  const rootFolder = addressSpace.findNode(\"RootFolder\");\n\n  node.warn(\"construct new address space for OPC UA\");\n\n\n  // ä¸€çº§ï¼šç”Ÿäº§çº¿å¯¹è±¡\n  const prodLine = namespace.addObject({\n    organizedBy: rootFolder.objects,\n    browseName: \"precast_concrete_productionline1\"\n  });\n\n  // ç”Ÿäº§çº¿è¿è¡ŒçŠ¶æ€å˜é‡ï¼ˆå…¨å±€ï¼‰\n  namespace.addVariable({\n    componentOf: prodLine,\n    browseName: \"line_status\",\n    nodeId: \"ns=1;s=precast_concrete_productionline1.line_status\",\n    dataType: \"Int32\",\n    value: {\n      get: () => new Variant({\n        dataType: DataType.Int32,\n        value: flexServerInternals.sandboxFlowContext.get(\"precast_concrete_productionline1.line_status\") || 0\n      }),\n      set: (variant) => {\n        flexServerInternals.sandboxFlowContext.set(\"precast_concrete_productionline1.line_status\", variant.value);\n        return opcua.StatusCodes.Good;\n      }\n    }\n  });\n\n  // äºŒçº§ï¼šModule1æ··å‡åœŸåˆ¶å¤‡å¯¹è±¡\n  const module1 = namespace.addObject({\n    organizedBy: prodLine,\n    browseName: \"module1_concrete_preparation\"\n  });\n\n  // æ¨¡å—è¿è¡ŒçŠ¶æ€å˜é‡ï¼ˆint,è¯»å†™ï¼‰\n  namespace.addVariable({\n    componentOf: module1,\n    browseName: \"module_status\",\n    nodeId: \"ns=1;s=precast.module1_concrete_preparation.module_status\",\n    dataType: \"Int32\",\n    value: {\n      get: () => new Variant({\n        dataType: DataType.Int32,\n        value: flexServerInternals.sandboxFlowContext.get(\"precast_concrete_productionline1.module1_concrete_preparation.module_status\") || 0\n      }),\n      set: (variant) => {\n        flexServerInternals.sandboxFlowContext.set(\"precast_concrete_productionline1.module1_concrete_preparation.module_status\", variant.value);\n        return opcua.StatusCodes.Good;\n      }\n    }\n  });\n\n  // ä¸‰çº§å¯¹è±¡ï¼ˆmaterials, mixer, qualityï¼‰\n  const materialsObj = namespace.addObject({\n    organizedBy: module1,\n    browseName: \"materials\"\n  });\n\n  const mixerObj = namespace.addObject({\n    organizedBy: module1,\n    browseName: \"mixer\"\n  });\n\n  const qualityObj = namespace.addObject({\n    organizedBy: module1,\n    browseName: \"quality\"\n  });\n\n  // å››çº§ï¼šmaterials å˜é‡\n  [\n    { name: \"cement\", path: \"materials.cement\" },\n    { name: \"sand\", path: \"materials.sand\" },\n    { name: \"gravel\", path: \"materials.gravel\" },\n    { name: \"water\", path: \"materials.water\" },\n    { name: \"additive\", path: \"materials.additive\" }\n  ].forEach(v => {\n    namespace.addVariable({\n      componentOf: materialsObj,\n      browseName: v.name,\n      nodeId: `ns=1;s=precast_line1.module1.materials.${v.name}`,\n      dataType: \"Double\",\n      value: {\n        get: () => new Variant({\n          dataType: DataType.Double,\n          value: flexServerInternals.sandboxFlowContext.get(`precast_concrete_productionline1.module1_concrete_preparation.${v.path}`) || 0\n        }),\n        set: (variant) => {\n          flexServerInternals.sandboxFlowContext.set(\n            `precast_concrete_productionline1.module1_concrete_preparation.${v.path}`,\n            variant.value\n          );\n          return opcua.StatusCodes.Good;\n        }\n      }\n    });\n  });\n\n  // mixerå˜é‡\n  [\n    { name: \"speed\", path: \"mixer.speed\" },\n    { name: \"power\", path: \"mixer.power\" },\n    { name: \"temperature\", path: \"mixer.temperature\" }\n  ].forEach(v => {\n    namespace.addVariable({\n      componentOf: mixerObj,\n      browseName: v.name,\n      nodeId: `ns=1;s=precast_line1.module1.mixer.${v.name}`,\n      dataType: \"Double\",\n      value: {\n        get: () => new Variant({\n          dataType: DataType.Double,\n          value: flexServerInternals.sandboxFlowContext.get(`precast_concrete_productionline1.module1_concrete_preparation.${v.path}`) || 0\n        }),\n        set: (variant) => {\n          flexServerInternals.sandboxFlowContext.set(\n            `precast_concrete_productionline1.module1_concrete_preparation.${v.path}`,\n            variant.value\n          );\n          return opcua.StatusCodes.Good;\n        }\n      }\n    });\n  });\n\n  // qualityå˜é‡\n  [\n    { name: \"slump\", path: \"quality.slump\" },\n    { name: \"strength\", path: \"quality.strength\" },\n    { name: \"density\", path: \"quality.density\" }\n  ].forEach(v => {\n    namespace.addVariable({\n      componentOf: qualityObj,\n      browseName: v.name,\n      nodeId: `ns=1;s=precast_line1.module1.quality.${v.name}`,\n      dataType: \"Double\",\n      value: {\n        get: () => new Variant({\n          dataType: DataType.Double,\n          value: flexServerInternals.sandboxFlowContext.get(`precast_concrete_productionline1.module1_concrete_preparation.${v.path}`) || 0\n        }),\n        set: (variant) => {\n          flexServerInternals.sandboxFlowContext.set(\n            `precast_concrete_productionline1.module1_concrete_preparation.${v.path}`,\n            variant.value\n          );\n          return opcua.StatusCodes.Good;\n        }\n      }\n    });\n  });\n\n\n// æ¨¡å—2\n  const module2 = namespace.addObject({ organizedBy: prodLine, browseName: \"module2_mold_assembly\" });\n  namespace.addVariable({\n    componentOf: module2,\n    browseName: \"module_status\",\n    nodeId: \"ns=1;s=precast_concrete_productionline1.module2_mold_assembly.module_status\",\n    dataType: \"Int32\",\n    value: {\n      get: () => new Variant({\n        dataType: DataType.Int32,\n        value: flexServerInternals.sandboxFlowContext.get(\"precast_concrete_productionline1.module2_mold_assembly.module_status\") || 0\n      }),\n      set: (variant) => {\n        flexServerInternals.sandboxFlowContext.set(\"precast_concrete_productionline1.module2_mold_assembly.module_status\", variant.value);\n        return opcua.StatusCodes.Good;\n      }\n    }\n  });\n  const moldsObj = namespace.addObject({ organizedBy: module2, browseName: \"molds\" });\n  [\n    { name: \"available\", path: \"molds.available\", dataType: \"Int32\" },\n    { name: \"inUse\", path: \"molds.inUse\", dataType: \"Int32\" },\n    { name: \"cleaning\", path: \"molds.cleaning\", dataType: \"Int32\" },\n    { name: \"maintenance\", path: \"molds.maintenance\", dataType: \"Int32\" }\n  ].forEach(v => {\n    namespace.addVariable({\n      componentOf: moldsObj,\n      browseName: v.name,\n      nodeId: `ns=1;s=precast_line1.module2.molds.${v.name}`,\n      dataType: v.dataType,\n      value: {\n        get: () => new Variant({\n          dataType: DataType[v.dataType],\n          value: flexServerInternals.sandboxFlowContext.get(`precast_concrete_productionline1.module2_mold_assembly.${v.path}`) || 0\n        }),\n        set: (variant) => {\n          flexServerInternals.sandboxFlowContext.set(`precast_concrete_productionline1.module2_mold_assembly.${v.path}`, variant.value);\n          return opcua.StatusCodes.Good;\n        }\n      }\n    });\n  });\n  const assemblyObj = namespace.addObject({ organizedBy: module2, browseName: \"assembly\" });\n  [\n    { name: \"position_accuracy\", path: \"assembly.position_accuracy\", dataType: \"Double\" },\n    // å¯¹å­—ç¬¦ä¸²é”ç´§çŠ¶æ€å¤„ç†ï¼Œè¿™é‡Œæ˜ å°„ä¸ºBooleanï¼Œæ‚¨å¯è‡ªè¡Œè°ƒæ•´\n    {\n      name: \"lock_status\", path: \"assembly.lock_status\", dataType: \"Boolean\",\n      value: {\n        get: () => {\n          const strVal = flexServerInternals.sandboxFlowContext.get(\"precast_concrete_productionline1.module2_mold_assembly.assembly.lock_status\");\n          return new Variant({ dataType: DataType.Boolean, value: strVal === \"å·²é”ç´§\" });\n        },\n        set: (variant) => {\n          flexServerInternals.sandboxFlowContext.set(\"precast_concrete_productionline1.module2_mold_assembly.assembly.lock_status\", variant.value ? \"å·²é”ç´§\" : \"å¾…é”ç´§\");\n          return opcua.StatusCodes.Good;\n        }\n      }\n    },\n    { name: \"cleaning_pressure\", path: \"assembly.cleaning_pressure\", dataType: \"Double\" }\n  ].forEach(v => {\n    const nodeObj = {\n      componentOf: assemblyObj,\n      browseName: v.name,\n      nodeId: `ns=1;s=precast_line1.module2.assembly.${v.name}`,\n      dataType: v.dataType,\n    };\n    if (v.name === \"lock_status\") {\n      nodeObj.value = v.value;\n    } else {\n      nodeObj.value = {\n        get: () => new Variant({\n          dataType: DataType[v.dataType],\n          value: flexServerInternals.sandboxFlowContext.get(`precast_concrete_productionline1.module2_mold_assembly.${v.path}`) || 0\n        }),\n        set: (variant) => {\n          flexServerInternals.sandboxFlowContext.set(`precast_concrete_productionline1.module2_mold_assembly.${v.path}`, variant.value);\n          return opcua.StatusCodes.Good;\n        }\n      };\n    }\n    namespace.addVariable(nodeObj);\n  });\n\n  // æ¨¡å—3ï¼šé’¢ç­‹ç½‘ç‰‡å®‰è£…\n  const module3 = namespace.addObject({\n    organizedBy: prodLine,\n    browseName: \"module3_rebar_installation\"\n  });\n  namespace.addVariable({\n    componentOf: module3,\n    browseName: \"module_status\",\n    nodeId: \"ns=1;s=precast_concrete_productionline1.module3_rebar_installation.module_status\",\n    dataType: \"Int32\",\n    value: {\n      get: () => new Variant({\n        dataType: DataType.Int32,\n        value: flexServerInternals.sandboxFlowContext.get(\"precast_concrete_productionline1.module3_rebar_installation.module_status\") || 0\n      }),\n      set: (variant) => {\n        flexServerInternals.sandboxFlowContext.set(\"precast_concrete_productionline1.module3_rebar_installation.module_status\", variant.value);\n        return opcua.StatusCodes.Good;\n      }\n    }\n  });\n  const rebarObj = namespace.addObject({ organizedBy: module3, browseName: \"rebar\" });\n  [\n    { name: \"inventory\", path: \"rebar.inventory\", dataType: \"Int32\" },\n    { name: \"specifications\", path: \"rebar.specifications\", dataType: \"String\" },\n    { name: \"position_x\", path: \"rebar.position_x\", dataType: \"Double\" },\n    { name: \"position_y\", path: \"rebar.position_y\", dataType: \"Double\" },\n    { name: \"installation_force\", path: \"rebar.installation_force\", dataType: \"Int32\" }\n  ].forEach(v => {\n    namespace.addVariable({\n      componentOf: rebarObj,\n      browseName: v.name,\n      nodeId: `ns=1;s=precast_line1.module3.rebar.${v.name}`,\n      dataType: v.dataType,\n      value: {\n        get: () => new Variant({\n          dataType: DataType[v.dataType],\n          value: flexServerInternals.sandboxFlowContext.get(`precast_concrete_productionline1.module3_rebar_installation.${v.path}`) || (v.dataType === \"String\" ? \"\" : 0)\n        }),\n        set: (variant) => {\n          flexServerInternals.sandboxFlowContext.set(`precast_concrete_productionline1.module3_rebar_installation.${v.path}`, variant.value);\n          return opcua.StatusCodes.Good;\n        }\n      }\n    });\n  });\n\n  const meshObj = namespace.addObject({ organizedBy: module3, browseName: \"mesh\" });\n  [\n    { name: \"inventory\", path: \"mesh.inventory\", dataType: \"Int32\" },\n    { name: \"specifications\", path: \"mesh.specifications\", dataType: \"String\" },\n    { name: \"coverage\", path: \"mesh.coverage\", dataType: \"Double\" }\n  ].forEach(v => {\n    namespace.addVariable({\n      componentOf: meshObj,\n      browseName: v.name,\n      nodeId: `ns=1;s=precast_line1.module3.mesh.${v.name}`,\n      dataType: v.dataType,\n      value: {\n        get: () => new Variant({\n          dataType: DataType[v.dataType],\n          value: flexServerInternals.sandboxFlowContext.get(`precast_concrete_productionline1.module3_rebar_installation.${v.path}`) || (v.dataType === \"String\" ? \"\" : 0)\n        }),\n        set: (variant) => {\n          flexServerInternals.sandboxFlowContext.set(`precast_concrete_productionline1.module3_rebar_installation.${v.path}`, variant.value);\n          return opcua.StatusCodes.Good;\n        }\n      }\n    });\n  });\n\n\n  // æ¨¡å—4ï¼šæ··å‡åœŸæµ‡ç­‘\n  const module4 = namespace.addObject({\n    organizedBy: prodLine,\n    browseName: \"module4_pouring\"\n  });\n  namespace.addVariable({\n    componentOf: module4,\n    browseName: \"module_status\",\n    nodeId: \"ns=1;s=precast_concrete_productionline1.module4_pouring.module_status\",\n    dataType: \"Int32\",\n    value: {\n      get: () => new Variant({\n        dataType: DataType.Int32,\n        value: flexServerInternals.sandboxFlowContext.get(\"precast_concrete_productionline1.module4_pouring.module_status\") || 0\n      }),\n      set: (variant) => {\n        flexServerInternals.sandboxFlowContext.set(\"precast_concrete_productionline1.module4_pouring.module_status\", variant.value);\n        return opcua.StatusCodes.Good;\n      }\n    }\n  });\n  const pouringObj = namespace.addObject({ organizedBy: module4, browseName: \"pouring\" });\n  [\n    { name: \"flow_rate\", path: \"pouring.flow_rate\", dataType: \"Double\" },\n    { name: \"pressure\", path: \"pouring.pressure\", dataType: \"Double\" },\n    { name: \"temperature\", path: \"pouring.temperature\", dataType: \"Double\" },\n    { name: \"height\", path: \"pouring.height\", dataType: \"Int32\" }\n  ].forEach(v => {\n    namespace.addVariable({\n      componentOf: pouringObj,\n      browseName: v.name,\n      nodeId: `ns=1;s=precast_line1.module4.pouring.${v.name}`,\n      dataType: v.dataType,\n      value: {\n        get: () => new Variant({\n          dataType: DataType[v.dataType],\n          value: flexServerInternals.sandboxFlowContext.get(`precast_concrete_productionline1.module4_pouring.${v.path}`) || 0\n        }),\n        set: (variant) => {\n          flexServerInternals.sandboxFlowContext.set(`precast_concrete_productionline1.module4_pouring.${v.path}`, variant.value);\n          return opcua.StatusCodes.Good;\n        }\n      }\n    });\n  });\n  const vibrationObj = namespace.addObject({ organizedBy: module4, browseName: \"vibration\" });\n  [\n    { name: \"frequency\", path: \"vibration.frequency\", dataType: \"Double\" },\n    { name: \"amplitude\", path: \"vibration.amplitude\", dataType: \"Double\" },\n    { name: \"duration\", path: \"vibration.duration\", dataType: \"Int32\" }\n  ].forEach(v => {\n    namespace.addVariable({\n      componentOf: vibrationObj,\n      browseName: v.name,\n      nodeId: `ns=1;s=precast_line1.module4.vibration.${v.name}`,\n      dataType: v.dataType,\n      value: {\n        get: () => new Variant({\n          dataType: DataType[v.dataType],\n          value: flexServerInternals.sandboxFlowContext.get(`precast_concrete_productionline1.module4_pouring.${v.path}`) || 0\n        }),\n        set: (variant) => {\n          flexServerInternals.sandboxFlowContext.set(`precast_concrete_productionline1.module4_pouring.${v.path}`, variant.value);\n          return opcua.StatusCodes.Good;\n        }\n      }\n    });\n  });\n\n\n  // æ¨¡å—5ï¼šå…»æŠ¤\n  const module5 = namespace.addObject({\n    organizedBy: prodLine,\n    browseName: \"module5_curing\"\n  });\n  namespace.addVariable({\n    componentOf: module5,\n    browseName: \"module_status\",\n    nodeId: \"ns=1;s=precast_concrete_productionline1.module5_curing.module_status\",\n    dataType: \"Int32\",\n    value: {\n      get: () => new Variant({\n        dataType: DataType.Int32,\n        value: flexServerInternals.sandboxFlowContext.get(\"precast_concrete_productionline1.module5_curing.module_status\") || 0\n      }),\n      set: (variant) => {\n        flexServerInternals.sandboxFlowContext.set(\"precast_concrete_productionline1.module5_curing.module_status\", variant.value);\n        return opcua.StatusCodes.Good;\n      }\n    }\n  });\n  const chamber1Obj = namespace.addObject({ organizedBy: module5, browseName: \"chamber1\" });\n  [\n    { name: \"temperature\", path: \"chamber1.temperature\", dataType: \"Double\" },\n    { name: \"humidity\", path: \"chamber1.humidity\", dataType: \"Double\" },\n    { name: \"pressure\", path: \"chamber1.pressure\", dataType: \"Double\" },\n    { name: \"time_remaining\", path: \"chamber1.time_remaining\", dataType: \"Int32\" }\n  ].forEach(v => {\n    namespace.addVariable({\n      componentOf: chamber1Obj,\n      browseName: v.name,\n      nodeId: `ns=1;s=precast_line1.module5.chamber1.${v.name}`,\n      dataType: v.dataType,\n      value: {\n        get: () => new Variant({\n          dataType: DataType[v.dataType],\n          value: flexServerInternals.sandboxFlowContext.get(`precast_concrete_productionline1.module5_curing.${v.path}`) || 0\n        }),\n        set: (variant) => {\n          flexServerInternals.sandboxFlowContext.set(`precast_concrete_productionline1.module5_curing.${v.path}`, variant.value);\n          return opcua.StatusCodes.Good;\n        }\n      }\n    });\n  });\n  const chamber2Obj = namespace.addObject({ organizedBy: module5, browseName: \"chamber2\" });\n  [\n    { name: \"temperature\", path: \"chamber2.temperature\", dataType: \"Double\" },\n    { name: \"humidity\", path: \"chamber2.humidity\", dataType: \"Double\" },\n    { name: \"pressure\", path: \"chamber2.pressure\", dataType: \"Double\" },\n    { name: \"time_remaining\", path: \"chamber2.time_remaining\", dataType: \"Int32\" }\n  ].forEach(v => {\n    namespace.addVariable({\n      componentOf: chamber2Obj,\n      browseName: v.name,\n      nodeId: `ns=1;s=precast_line1.module5.chamber2.${v.name}`,\n      dataType: v.dataType,\n      value: {\n        get: () => new Variant({\n          dataType: DataType[v.dataType],\n          value: flexServerInternals.sandboxFlowContext.get(`precast_concrete_productionline1.module5_curing.${v.path}`) || 0\n        }),\n        set: (variant) => {\n          flexServerInternals.sandboxFlowContext.set(`precast_concrete_productionline1.module5_curing.${v.path}`, variant.value);\n          return opcua.StatusCodes.Good;\n        }\n      }\n    });\n  });\n\n\n  // æ¨¡å—6ï¼šè„±æ¨¡ä¸èµ·åŠ\n  const module6 = namespace.addObject({\n    organizedBy: prodLine,\n    browseName: \"module6_demolding\"\n  });\n  namespace.addVariable({\n    componentOf: module6,\n    browseName: \"module_status\",\n    nodeId: \"ns=1;s=precast_concrete_productionline1.module6_demolding.module_status\",\n    dataType: \"Int32\",\n    value: {\n      get: () => new Variant({\n        dataType: DataType.Int32,\n        value: flexServerInternals.sandboxFlowContext.get(\"precast_concrete_productionline1.module6_demolding.module_status\") || 0\n      }),\n      set: (variant) => {\n        flexServerInternals.sandboxFlowContext.set(\"precast_concrete_productionline1.module6_demolding.module_status\", variant.value);\n        return opcua.StatusCodes.Good;\n      }\n    }\n  });\n  const demoldingObj = namespace.addObject({ organizedBy: module6, browseName: \"demolding\" });\n  [\n    { name: \"force\", path: \"demolding.force\", dataType: \"Int32\" },\n    { name: \"success_rate\", path: \"demolding.success_rate\", dataType: \"Double\" },\n    { name: \"cycle_time\", path: \"demolding.cycle_time\", dataType: \"Int32\" }\n  ].forEach(v => {\n    namespace.addVariable({\n      componentOf: demoldingObj,\n      browseName: v.name,\n      nodeId: `ns=1;s=precast_line1.module6.demolding.${v.name}`,\n      dataType: v.dataType,\n      value: {\n        get: () => new Variant({\n          dataType: DataType[v.dataType],\n          value: flexServerInternals.sandboxFlowContext.get(`precast_concrete_productionline1.module6_demolding.${v.path}`) || 0\n        }),\n        set: (variant) => {\n          flexServerInternals.sandboxFlowContext.set(`precast_concrete_productionline1.module6_demolding.${v.path}`, variant.value);\n          return opcua.StatusCodes.Good;\n        }\n      }\n    });\n  });\n  const craneObj = namespace.addObject({ organizedBy: module6, browseName: \"crane\" });\n  [\n    { name: \"load\", path: \"crane.load\", dataType: \"Double\" },\n    { name: \"height\", path: \"crane.height\", dataType: \"Double\" },\n    { name: \"position\", path: \"crane.position\", dataType: \"String\" },\n    { name: \"status\", path: \"crane.status\", dataType: \"String\" }\n  ].forEach(v => {\n    namespace.addVariable({\n      componentOf: craneObj,\n      browseName: v.name,\n      nodeId: `ns=1;s=precast_line1.module6.crane.${v.name}`,\n      dataType: v.dataType,\n      value: {\n        get: () => new Variant({\n          dataType: DataType[v.dataType],\n          value: flexServerInternals.sandboxFlowContext.get(`precast_concrete_productionline1.module6_demolding.${v.path}`) || (v.dataType === \"String\" ? \"\" : 0)\n        }),\n        set: (variant) => {\n          flexServerInternals.sandboxFlowContext.set(`precast_concrete_productionline1.module6_demolding.${v.path}`, variant.value);\n          return opcua.StatusCodes.Good;\n        }\n      }\n    });\n  });\n\n\n  // æ¨¡å—7ï¼šæˆå“è´¨æ£€\n  const module7 = namespace.addObject({\n    organizedBy: prodLine,\n    browseName: \"module7_quality_check\"\n  });\n  namespace.addVariable({\n    componentOf: module7,\n    browseName: \"module_status\",\n    nodeId: \"ns=1;s=precast_concrete_productionline1.module7_quality_check.module_status\",\n    dataType: \"Int32\",\n    value: {\n      get: () => new Variant({\n        dataType: DataType.Int32,\n        value: flexServerInternals.sandboxFlowContext.get(\"precast_concrete_productionline1.module7_quality_check.module_status\") || 0\n      }),\n      set: (variant) => {\n        flexServerInternals.sandboxFlowContext.set(\"precast_concrete_productionline1.module7_quality_check.module_status\", variant.value);\n        return opcua.StatusCodes.Good;\n      }\n    }\n  });\n  const dimensionsObj = namespace.addObject({ organizedBy: module7, browseName: \"dimensions\" });\n  [\n    { name: \"length\", path: \"dimensions.length\", dataType: \"Double\" },\n    { name: \"width\", path: \"dimensions.width\", dataType: \"Double\" },\n    { name: \"height\", path: \"dimensions.height\", dataType: \"Double\" },\n    { name: \"tolerance\", path: \"dimensions.tolerance\", dataType: \"String\" }\n  ].forEach(v => {\n    namespace.addVariable({\n      componentOf: dimensionsObj,\n      browseName: v.name,\n      nodeId: `ns=1;s=precast_line1.module7.dimensions.${v.name}`,\n      dataType: v.dataType,\n      value: {\n        get: () => new Variant({\n          dataType: DataType[v.dataType],\n          value: flexServerInternals.sandboxFlowContext.get(`precast_concrete_productionline1.module7_quality_check.${v.path}`) || (v.dataType === \"String\" ? \"\" : 0)\n        }),\n        set: (variant) => {\n          flexServerInternals.sandboxFlowContext.set(`precast_concrete_productionline1.module7_quality_check.${v.path}`, variant.value);\n          return opcua.StatusCodes.Good;\n        }\n      }\n    });\n  });\n  const productqualityObj = namespace.addObject({ organizedBy: module7, browseName: \"productquality\" });\n  [\n    { name: \"surface_grade\", path: \"quality.surface_grade\", dataType: \"String\" },\n    { name: \"strength_grade\", path: \"quality.strength_grade\", dataType: \"String\" },\n    { name: \"pass_rate\", path: \"quality.pass_rate\", dataType: \"Double\" },\n    { name: \"defect_count\", path: \"quality.defect_count\", dataType: \"Int32\" }\n  ].forEach(v => {\n    namespace.addVariable({\n      componentOf: productqualityObj,\n      browseName: v.name,\n      nodeId: `ns=1;s=precast_line1.module7.quality.${v.name}`,\n      dataType: v.dataType,\n      value: {\n        get: () => new Variant({\n          dataType: DataType[v.dataType],\n          value: flexServerInternals.sandboxFlowContext.get(`precast_concrete_productionline1.module7_quality_check.${v.path}`) || (v.dataType === \"String\" ? \"\" : 0)\n        }),\n        set: (variant) => {\n          flexServerInternals.sandboxFlowContext.set(`precast_concrete_productionline1.module7_quality_check.${v.path}`, variant.value);\n          return opcua.StatusCodes.Good;\n        }\n      }\n    });\n  });\n\n\n  // æ¨¡å—8ï¼šå…¥åº“ç®¡ç†\n  const module8 = namespace.addObject({\n    organizedBy: prodLine,\n    browseName: \"module8_inventory_management\"\n  });\n  namespace.addVariable({\n    componentOf: module8,\n    browseName: \"module_status\",\n    nodeId: \"ns=1;s=precast_concrete_productionline1.module8_inventory_management.module_status\",\n    dataType: \"Int32\",\n    value: {\n      get: () => new Variant({\n        dataType: DataType.Int32,\n        value: flexServerInternals.sandboxFlowContext.get(\"precast_concrete_productionline1.module8_inventory_management.module_status\") || 0\n      }),\n      set: (variant) => {\n        flexServerInternals.sandboxFlowContext.set(\"precast_concrete_productionline1.module8_inventory_management.module_status\", variant.value);\n        return opcua.StatusCodes.Good;\n      }\n    }\n  });\n  const inventoryObj = namespace.addObject({ organizedBy: module8, browseName: \"inventory\" });\n  [\n    { name: \"total_products\", path: \"inventory.total_products\", dataType: \"Int32\" },\n    { name: \"today_in\", path: \"inventory.today_in\", dataType: \"Int32\" },\n    { name: \"today_out\", path: \"inventory.today_out\", dataType: \"Int32\" },\n    { name: \"available_space\", path: \"inventory.available_space\", dataType: \"Double\" }\n  ].forEach(v => {\n    namespace.addVariable({\n      componentOf: inventoryObj,\n      browseName: v.name,\n      nodeId: `ns=1;s=precast_line1.module8.inventory.${v.name}`,\n      dataType: v.dataType,\n      value: {\n        get: () => new Variant({\n          dataType: DataType[v.dataType],\n          value: flexServerInternals.sandboxFlowContext.get(`precast_concrete_productionline1.module8_inventory_management.${v.path}`) || 0\n        }),\n        set: (variant) => {\n          flexServerInternals.sandboxFlowContext.set(`precast_concrete_productionline1.module8_inventory_management.${v.path}`, variant.value);\n          return opcua.StatusCodes.Good;\n        }\n      }\n    });\n  });\n  const logisticsObj = namespace.addObject({ organizedBy: module8, browseName: \"logistics\" });\n  [\n    { name: \"pending_orders\", path: \"logistics.pending_orders\", dataType: \"Int32\" },\n    { name: \"shipping_today\", path: \"logistics.shipping_today\", dataType: \"Int32\" },\n    { name: \"location_A\", path: \"logistics.location_A\", dataType: \"Int32\" },\n    { name: \"location_B\", path: \"logistics.location_B\", dataType: \"Int32\" },\n    { name: \"location_C\", path: \"logistics.location_C\", dataType: \"Int32\" }\n  ].forEach(v => {\n    namespace.addVariable({\n      componentOf: logisticsObj,\n      browseName: v.name,\n      nodeId: `ns=1;s=precast_line1.module8.logistics.${v.name}`,\n      dataType: v.dataType,\n      value: {\n        get: () => new Variant({\n          dataType: DataType[v.dataType],\n          value: flexServerInternals.sandboxFlowContext.get(`precast_concrete_productionline1.module8_inventory_management.${v.path}`) || 0\n        }),\n        set: (variant) => {\n          flexServerInternals.sandboxFlowContext.set(`precast_concrete_productionline1.module8_inventory_management.${v.path}`, variant.value);\n          return opcua.StatusCodes.Good;\n        }\n      }\n    });\n  });\n\n\n  node.warn(\"Concrete Preparation (module1) address space created.\");\n  done();\n}\n",
        "x": 370,
        "y": 1200,
        "wires": []
    },
    {
        "id": "cfadf5b377f03336",
        "type": "OpcUa-Client",
        "z": "main_flow_tab",
        "d": true,
        "endpoint": "9ce077ca2aecb7b6",
        "action": "read",
        "deadbandtype": "None",
        "deadbandvalue": 0,
        "time": 5,
        "timeUnit": "s",
        "certificate": "n",
        "localfile": "",
        "localkeyfile": "",
        "useTransport": false,
        "maxChunkCount": "",
        "maxMessageSize": "",
        "receiveBufferSize": "",
        "sendBufferSize": "",
        "setstatusandtime": false,
        "keepsessionalive": false,
        "name": "Read Concrete Variables",
        "x": 270,
        "y": 1300,
        "wires": [
            [
                "7c9aeb3d4be1ae6f"
            ],
            [],
            []
        ]
    },
    {
        "id": "7c9aeb3d4be1ae6f",
        "type": "debug",
        "z": "main_flow_tab",
        "d": true,
        "name": "OPC UA Read Output",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 260,
        "y": 1340,
        "wires": []
    },
    {
        "id": "197582e99a9e7bed",
        "type": "inject",
        "z": "main_flow_tab",
        "d": true,
        "name": "Read productionline1_module1_cement",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "",
        "topic": "ns=1;s=precast_line1.module1.materials.cement",
        "payload": "",
        "payloadType": "date",
        "x": 310,
        "y": 1260,
        "wires": [
            [
                "cfadf5b377f03336"
            ]
        ]
    },
    {
        "id": "331912bc0d51877c",
        "type": "comment",
        "z": "main_flow_tab",
        "name": "",
        "info": "",
        "x": 200,
        "y": 1140,
        "wires": []
    },
    {
        "id": "edf8f32d40a50994",
        "type": "function",
        "z": "main_flow_tab",
        "d": true,
        "name": "CO2-Certificate",
        "func": "// Node-RED function nodeä»£ç ï¼Œç”ŸæˆCO2è¯ä¹¦JSON\n\nfunction randomAlphaNum(length) {\n    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n    let result = '';\n    for(let i=0; i<length; i++) {\n        result += chars.charAt(Math.floor(Math.random() * chars.length));\n    }\n    return result;\n}\n\nfunction formatDateTime(date) {\n    return date.toISOString().replace('T', ' ').substring(0, 19);\n}\n\n// ç”Ÿæˆéšæœºæ’æ”¾é‡ï¼Œ0.5å¨Â±10%\nconst baseEmission = 0.5;\nconst emission = baseEmission * (0.9 + Math.random() * 0.2); \n\n// å®æ—¶æ—¥æœŸæ—¶é—´\nconst now = new Date();\nconst dateTimeStr = formatDateTime(now);\n\n// ç”Ÿæˆéšæœºäº§å“æ‰¹æ¬¡å·ï¼ˆ8ä½å­—æ¯æ•°å­—ï¼‰\nconst productBatch = randomAlphaNum(8);\n\n// ç”Ÿæˆéšæœºäº§å“ç±»å‹ç ï¼ˆ2ä½å­—æ¯æ•°å­—ï¼‰\nconst productTypeCode = randomAlphaNum(2);\n\n// ç”Ÿæˆç­¾å­—ï¼ˆ18ä½å­—æ¯æ•°å­—ï¼‰\nconst signature = randomAlphaNum(18);\n\n// æ„å»ºè¯ä¹¦å¯¹è±¡\nconst co2Certificate = {\n    certificateNumber: \"CNMECO2-91120-Palaiseau-2025\",\n    issuingAuthority: \"CNMECO2\",\n    emissionData_tCO2e: Number(emission.toFixed(3)),\n    accountingStandard: \"GHG Protocol\",\n    projectDetails: {\n        organizationName: \"åŒ—æ–¹æ–°æ™¨å·¥ä¸šé›†å›¢\",\n        productBatch: productBatch,\n        productTypeCode: productTypeCode,\n        timestamp: dateTimeStr\n    },\n    organizationLocation: \"TÃ©lecom Paris, Institut de polytechnique de Paris.\",\n    projectNameAndType: \"ç»¿è‰²èŠ‚èƒ½å»ºç­‘ææ–™\",\n    accountingPeriod: 2025,\n    auditVerification: \"é€šè¿‡\",\n    validityPeriod: \"1å¹´\",\n    usageRestriction: \"æ¬§æ´²å¢ƒå†…ä½¿ç”¨\",\n    issueDateAndSignature: {\n        issueDate: dateTimeStr,\n        signature: signature\n    }\n};\n\nmsg.payload = co2Certificate;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 340,
        "y": 1420,
        "wires": [
            [
                "1a2bcf57edf5fa7d"
            ]
        ]
    },
    {
        "id": "1a2bcf57edf5fa7d",
        "type": "debug",
        "z": "main_flow_tab",
        "d": true,
        "name": "debug 2",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 420,
        "y": 1480,
        "wires": []
    },
    {
        "id": "4044ca4f130e1c36",
        "type": "inject",
        "z": "main_flow_tab",
        "d": true,
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 260,
        "y": 1480,
        "wires": [
            [
                "edf8f32d40a50994"
            ]
        ]
    },
    {
        "id": "overview_group2",
        "type": "ui_group",
        "name": "ç”Ÿäº§ç»Ÿè®¡",
        "tab": "main_overview_tab",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "overview_group3",
        "type": "ui_group",
        "name": "å®æ—¶æŠ¥è­¦",
        "tab": "main_overview_tab",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "m1_group1",
        "type": "ui_group",
        "name": "åŸæ–™çŠ¶æ€",
        "tab": "module1_tab",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "m1_group2",
        "type": "ui_group",
        "name": "æ…æ‹Œè®¾å¤‡",
        "tab": "module1_tab",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "m1_group3",
        "type": "ui_group",
        "name": "è´¨é‡å‚æ•°",
        "tab": "module1_tab",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "m2_group1",
        "type": "ui_group",
        "name": "æ¨¡å…·ä¿¡æ¯",
        "tab": "module2_tab",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "m2_group2",
        "type": "ui_group",
        "name": "ç»„è£…çŠ¶æ€",
        "tab": "module2_tab",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "m3_group1",
        "type": "ui_group",
        "name": "é’¢ç­‹å®‰è£…",
        "tab": "module3_tab",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "m3_group2",
        "type": "ui_group",
        "name": "ç½‘ç‰‡å®‰è£…",
        "tab": "module3_tab",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "m4_group1",
        "type": "ui_group",
        "name": "æµ‡ç­‘è¿‡ç¨‹",
        "tab": "module4_tab",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "m4_group2",
        "type": "ui_group",
        "name": "æŒ¯æ£è¿‡ç¨‹",
        "tab": "module4_tab",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "m5_group1",
        "type": "ui_group",
        "name": "å…»æŠ¤ä»“1",
        "tab": "module5_tab",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "m5_group2",
        "type": "ui_group",
        "name": "å…»æŠ¤ä»“2",
        "tab": "module5_tab",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "m6_group1",
        "type": "ui_group",
        "name": "è„±æ¨¡å·¥åº",
        "tab": "module6_tab",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "m6_group2",
        "type": "ui_group",
        "name": "èµ·åŠå·¥åº",
        "tab": "module6_tab",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "m7_group1",
        "type": "ui_group",
        "name": "å°ºå¯¸ä¸å¤–è§‚",
        "tab": "module7_tab",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "m7_group2",
        "type": "ui_group",
        "name": "è´¨é‡æ£€éªŒ",
        "tab": "module7_tab",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "m8_group1",
        "type": "ui_group",
        "name": "åº“å­˜ä¿¡æ¯",
        "tab": "module8_tab",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "m8_group2",
        "type": "ui_group",
        "name": "ç‰©æµç®¡ç†",
        "tab": "module8_tab",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "overview_group1",
        "type": "ui_group",
        "name": "ç”Ÿäº§çº¿çŠ¶æ€",
        "tab": "main_overview_tab",
        "order": 1,
        "disp": true,
        "width": "12",
        "collapse": false
    },
    {
        "id": "group_stats",
        "type": "ui_group",
        "name": "ç”Ÿäº§ç»Ÿè®¡",
        "tab": "tab_main",
        "order": 1,
        "disp": true,
        "width": 12,
        "collapse": false
    },
    {
        "id": "group_modules",
        "type": "ui_group",
        "name": "æ¨¡å—çŠ¶æ€",
        "tab": "tab_main",
        "order": 2,
        "disp": true,
        "width": 12,
        "collapse": false
    },
    {
        "id": "group_alarms",
        "type": "ui_group",
        "name": "å‘Šè­¦ä¿¡æ¯",
        "tab": "tab_main",
        "order": 3,
        "disp": true,
        "width": 12,
        "collapse": false
    },
    {
        "id": "9ce077ca2aecb7b6",
        "type": "OpcUa-Endpoint",
        "endpoint": "opc.tcp://127.0.0.1:4842",
        "secpol": "None",
        "secmode": "None",
        "none": true,
        "login": false,
        "usercert": false,
        "usercertificate": "",
        "userprivatekey": ""
    },
    {
        "id": "main_overview_tab",
        "type": "ui_tab",
        "name": "ç”Ÿäº§æ€»è§ˆ",
        "icon": "dashboard",
        "order": 3,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "module1_tab",
        "type": "ui_tab",
        "name": "æ··å‡åœŸåˆ¶å¤‡",
        "icon": "build",
        "order": 6,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "module2_tab",
        "type": "ui_tab",
        "name": "æ¨¡å…·ç»„è£…",
        "icon": "view_module",
        "order": 5,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "module3_tab",
        "type": "ui_tab",
        "name": "é’¢ç­‹ç½‘ç‰‡å®‰è£…",
        "icon": "grid_on",
        "order": 7,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "module4_tab",
        "type": "ui_tab",
        "name": "æ··å‡åœŸæµ‡ç­‘",
        "icon": "opacity",
        "order": 8,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "module5_tab",
        "type": "ui_tab",
        "name": "å…»æŠ¤",
        "icon": "thermostat",
        "order": 9,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "module6_tab",
        "type": "ui_tab",
        "name": "è„±æ¨¡ä¸èµ·åŠ",
        "icon": "elevator",
        "order": 10,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "module7_tab",
        "type": "ui_tab",
        "name": "æˆå“è´¨æ£€",
        "icon": "verified",
        "order": 11,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "module8_tab",
        "type": "ui_tab",
        "name": "å…¥åº“ç®¡ç†",
        "icon": "inventory",
        "order": 12,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "tab_main",
        "type": "ui_tab",
        "name": "ç”Ÿäº§ç›‘æ§",
        "icon": "dashboard",
        "order": 1,
        "disabled": false,
        "hidden": false
    }
]